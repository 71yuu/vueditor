/*!
 * vueditor v0.3.1
 * https://github.com/hifarer/vueditor.git
 */
(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory(require("vuex"), require("vue"));
	else if(typeof define === 'function' && define.amd)
		define("Vueditor", ["vuex", "vue"], factory);
	else if(typeof exports === 'object')
		exports["Vueditor"] = factory(require("vuex"), require("vue"));
	else
		root["Vueditor"] = factory(root["Vuex"], root["Vue"]);
})(this, function(__WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_8__) {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "/";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 7);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports) {

/*
	MIT License http://www.opensource.org/licenses/mit-license.php
	Author Tobias Koppers @sokra
*/
// css base code, injected by the css-loader
module.exports = function(useSourceMap) {
	var list = [];

	// return the list of modules as css string
	list.toString = function toString() {
		return this.map(function (item) {
			var content = cssWithMappingToString(item, useSourceMap);
			if(item[2]) {
				return "@media " + item[2] + "{" + content + "}";
			} else {
				return content;
			}
		}).join("");
	};

	// import a list of modules into the list
	list.i = function(modules, mediaQuery) {
		if(typeof modules === "string")
			modules = [[null, modules, ""]];
		var alreadyImportedModules = {};
		for(var i = 0; i < this.length; i++) {
			var id = this[i][0];
			if(typeof id === "number")
				alreadyImportedModules[id] = true;
		}
		for(i = 0; i < modules.length; i++) {
			var item = modules[i];
			// skip already imported module
			// this implementation is not 100% perfect for weird media query combinations
			//  when a module is imported multiple times with different media queries.
			//  I hope this will never occur (Hey this way we have smaller bundles)
			if(typeof item[0] !== "number" || !alreadyImportedModules[item[0]]) {
				if(mediaQuery && !item[2]) {
					item[2] = mediaQuery;
				} else if(mediaQuery) {
					item[2] = "(" + item[2] + ") and (" + mediaQuery + ")";
				}
				list.push(item);
			}
		}
	};
	return list;
};

function cssWithMappingToString(item, useSourceMap) {
	var content = item[1] || '';
	var cssMapping = item[3];
	if (!cssMapping) {
		return content;
	}

	if (useSourceMap && typeof btoa === 'function') {
		var sourceMapping = toComment(cssMapping);
		var sourceURLs = cssMapping.sources.map(function (source) {
			return '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'
		});

		return [content].concat(sourceURLs).concat([sourceMapping]).join('\n');
	}

	return [content].join('\n');
}

// Adapted from convert-source-map (MIT)
function toComment(sourceMap) {
	// eslint-disable-next-line no-undef
	var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));
	var data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;

	return '/*# ' + data + ' */';
}


/***/ }),
/* 1 */
/***/ (function(module, exports) {

/*
	MIT License http://www.opensource.org/licenses/mit-license.php
	Author Tobias Koppers @sokra
*/
var stylesInDom = {},
	memoize = function(fn) {
		var memo;
		return function () {
			if (typeof memo === "undefined") memo = fn.apply(this, arguments);
			return memo;
		};
	},
	isOldIE = memoize(function() {
		return /msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase());
	}),
	getHeadElement = memoize(function () {
		return document.head || document.getElementsByTagName("head")[0];
	}),
	singletonElement = null,
	singletonCounter = 0,
	styleElementsInsertedAtTop = [];

module.exports = function(list, options) {
	if(typeof DEBUG !== "undefined" && DEBUG) {
		if(typeof document !== "object") throw new Error("The style-loader cannot be used in a non-browser environment");
	}

	options = options || {};
	// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>
	// tags it will allow on a page
	if (typeof options.singleton === "undefined") options.singleton = isOldIE();

	// By default, add <style> tags to the bottom of <head>.
	if (typeof options.insertAt === "undefined") options.insertAt = "bottom";

	var styles = listToStyles(list);
	addStylesToDom(styles, options);

	return function update(newList) {
		var mayRemove = [];
		for(var i = 0; i < styles.length; i++) {
			var item = styles[i];
			var domStyle = stylesInDom[item.id];
			domStyle.refs--;
			mayRemove.push(domStyle);
		}
		if(newList) {
			var newStyles = listToStyles(newList);
			addStylesToDom(newStyles, options);
		}
		for(var i = 0; i < mayRemove.length; i++) {
			var domStyle = mayRemove[i];
			if(domStyle.refs === 0) {
				for(var j = 0; j < domStyle.parts.length; j++)
					domStyle.parts[j]();
				delete stylesInDom[domStyle.id];
			}
		}
	};
}

function addStylesToDom(styles, options) {
	for(var i = 0; i < styles.length; i++) {
		var item = styles[i];
		var domStyle = stylesInDom[item.id];
		if(domStyle) {
			domStyle.refs++;
			for(var j = 0; j < domStyle.parts.length; j++) {
				domStyle.parts[j](item.parts[j]);
			}
			for(; j < item.parts.length; j++) {
				domStyle.parts.push(addStyle(item.parts[j], options));
			}
		} else {
			var parts = [];
			for(var j = 0; j < item.parts.length; j++) {
				parts.push(addStyle(item.parts[j], options));
			}
			stylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};
		}
	}
}

function listToStyles(list) {
	var styles = [];
	var newStyles = {};
	for(var i = 0; i < list.length; i++) {
		var item = list[i];
		var id = item[0];
		var css = item[1];
		var media = item[2];
		var sourceMap = item[3];
		var part = {css: css, media: media, sourceMap: sourceMap};
		if(!newStyles[id])
			styles.push(newStyles[id] = {id: id, parts: [part]});
		else
			newStyles[id].parts.push(part);
	}
	return styles;
}

function insertStyleElement(options, styleElement) {
	var head = getHeadElement();
	var lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];
	if (options.insertAt === "top") {
		if(!lastStyleElementInsertedAtTop) {
			head.insertBefore(styleElement, head.firstChild);
		} else if(lastStyleElementInsertedAtTop.nextSibling) {
			head.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);
		} else {
			head.appendChild(styleElement);
		}
		styleElementsInsertedAtTop.push(styleElement);
	} else if (options.insertAt === "bottom") {
		head.appendChild(styleElement);
	} else {
		throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");
	}
}

function removeStyleElement(styleElement) {
	styleElement.parentNode.removeChild(styleElement);
	var idx = styleElementsInsertedAtTop.indexOf(styleElement);
	if(idx >= 0) {
		styleElementsInsertedAtTop.splice(idx, 1);
	}
}

function createStyleElement(options) {
	var styleElement = document.createElement("style");
	styleElement.type = "text/css";
	insertStyleElement(options, styleElement);
	return styleElement;
}

function addStyle(obj, options) {
	var styleElement, update, remove;

	if (options.singleton) {
		var styleIndex = singletonCounter++;
		styleElement = singletonElement || (singletonElement = createStyleElement(options));
		update = applyToSingletonTag.bind(null, styleElement, styleIndex, false);
		remove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);
	} else {
		styleElement = createStyleElement(options);
		update = applyToTag.bind(null, styleElement);
		remove = function() {
			removeStyleElement(styleElement);
		};
	}

	update(obj);

	return function updateStyle(newObj) {
		if(newObj) {
			if(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)
				return;
			update(obj = newObj);
		} else {
			remove();
		}
	};
}

var replaceText = (function () {
	var textStore = [];

	return function (index, replacement) {
		textStore[index] = replacement;
		return textStore.filter(Boolean).join('\n');
	};
})();

function applyToSingletonTag(styleElement, index, remove, obj) {
	var css = remove ? "" : obj.css;

	if (styleElement.styleSheet) {
		styleElement.styleSheet.cssText = replaceText(index, css);
	} else {
		var cssNode = document.createTextNode(css);
		var childNodes = styleElement.childNodes;
		if (childNodes[index]) styleElement.removeChild(childNodes[index]);
		if (childNodes.length) {
			styleElement.insertBefore(cssNode, childNodes[index]);
		} else {
			styleElement.appendChild(cssNode);
		}
	}
}

function applyToTag(styleElement, obj) {
	var css = obj.css;
	var media = obj.media;
	var sourceMap = obj.sourceMap;

	if (media) {
		styleElement.setAttribute("media", media);
	}

	if (sourceMap) {
		// https://developer.chrome.com/devtools/docs/javascript-debugging
		// this makes source maps inside style tags work properly in Chrome
		css += '\n/*# sourceURL=' + sourceMap.sources[0] + ' */';
		// http://stackoverflow.com/a/26603875
		css += "\n/*# sourceMappingURL=data:application/json;base64," + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + " */";
	}

	if (styleElement.styleSheet) {
		styleElement.styleSheet.cssText = css;
	} else {
		while(styleElement.firstChild) {
			styleElement.removeChild(styleElement.firstChild);
		}
		styleElement.appendChild(document.createTextNode(css));
	}
}


/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var defaultConf = {
  spellcheck: false,
  noFormatPaste: true,
  pasteUpload: false,
  toolbar: ['removeFormat', 'undo', 'redo', '|', 'element', 'fontName', 'fontSize', 'foreColor', 'backColor', 'divider', 'bold', 'italic', 'underline', 'strikeThrough', 'link', 'unLink', 'divider', 'subscript', 'superscript', 'divider', 'justifyLeft', 'justifyCenter', 'justifyRight', 'justifyFull', '|', 'indent', 'outdent', 'insertOrderedList', 'insertUnorderedList', '|', 'picture', 'table', '|', 'code', 'fullscreen', 'sourceCode', 'markdown'],
  fontName: [{ val: 'arial black' }, { val: 'times new roman' }, { val: 'Courier New' }],
  fontSize: ['12px', '14px', '16px', '18px', '20px', '24px', '28px', '32px', '36px'],
  code: {
    type: ['bash', 'clike', 'css', 'html', 'java', 'javascript', 'php', 'python', 'sql'],
    pattern: {
      attr: 'class',
      value: 'language-#type#'
    }
  }
};

var config = JSON.parse(JSON.stringify(defaultConf));

exports.default = {
  setConfig: function setConfig(data) {
    config = data;
  },
  getConfig: function getConfig(name) {
    return name ? config[name] : config;
  },
  getDefaultConf: function getDefaultConf() {
    return defaultConf;
  }
};
module.exports = exports['default'];

/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var defaultLang = {

  app: {},

  removeFormat: { title: 'Remove format' },

  bold: { title: 'Bold' },
  italic: { title: 'Italic' },
  underline: { title: 'Underline' },
  strikeThrough: { title: 'Strike through' },

  superscript: { title: 'Superscript' },
  subscript: { title: 'Subscript' },
  indent: { title: 'Indent' },
  outdent: { title: 'Outdent' },

  justifyLeft: { title: 'Justify left' },
  justifyCenter: { title: 'Justify center' },
  justifyRight: { title: 'Justify right' },
  justifyFull: { title: 'Justify full' },

  insertOrderedList: { title: 'Insert ordered list' },
  insertUnorderedList: { title: 'Insert unordered list' },

  foreColor: {
    title: 'Text color',
    ok: 'ok',
    colorCode: 'Color code',
    invalidColorCodeMsg: 'Please enter the correct color code'
  },
  backColor: {
    title: 'Background color',
    ok: 'ok',
    colorCode: 'Color code',
    invalidColorCodeMsg: 'Please enter the correct color code'
  },
  fontName: {},
  fontSize: {},
  code: {},
  element: {},
  design: {
    ieMsg: 'You must select a text to use this feature in IE browser'
  },
  link: {
    title: 'Add link',
    ok: 'OK'
  },
  unLink: {
    title: 'unlink'
  },
  markdown: {
    title: 'markdown'
  },
  picture: {
    title: 'Insert Picture',
    ok: 'OK',
    cancel: 'Cancel',
    invalidFile: 'No file selected or selected file is not a picture'
  },
  sourceCode: {
    title: 'Source Code'
  },
  fullscreen: {
    title: 'Fullscreen'
  },
  table: { title: 'Table' },
  undo: { title: 'Undo' },
  redo: { title: 'Redo' }
};

var lang = JSON.parse(JSON.stringify(defaultLang));

exports.default = {
  setLang: function setLang(data) {
    data && (lang = data);
  },
  getLang: function getLang(name) {
    return name ? lang[name] : lang;
  },
  getDefaultLang: function getDefaultLang() {
    return defaultLang;
  }
};
module.exports = exports['default'];

/***/ }),
/* 4 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = {
  props: ['tagName'],
  computed: {
    // rect belong to the clicked toolbar element
    rect: function rect() {
      return this.$store.state.rect;
    },
    style: function style() {
      if (!this.showPopup) {
        return { left: 0, top: 0 };
      }
      var _rect = this.rect,
          left = _rect.left,
          top = _rect.top,
          width = _rect.width,
          height = _rect.height;

      var offsetLeft = left;
      if (this.$el) {
        this.$el.style.display = 'block';
        // > 0 means the popover menu's right part is not totally visible
        if (left + this.$el.offsetWidth - document.documentElement.clientWidth > 0) {
          offsetLeft = left - this.$el.offsetWidth + width;
          if (offsetLeft < 0) {
            offsetLeft = left + width / 2 - this.$el.offsetWidth / 2;
          }
        }
        this.$el.style.display = 'none';
      }
      return { left: offsetLeft + 'px', top: top + height + 'px' };
    }
  }
};
module.exports = exports['default'];

/***/ }),
/* 5 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_5__;

/***/ }),
/* 6 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var defaultToolbar = {

  btns: {

    removeFormat: { className: 'icon-eraser', action: 'removeFormat', native: true },

    bold: { className: 'icon-bold', action: 'bold', native: true },
    italic: { className: 'icon-italic', action: 'italic', native: true },
    underline: { className: 'icon-underline', action: 'underline', native: true },
    strikeThrough: { className: 'icon-strikethrough', action: 'strikeThrough', native: true },

    superscript: { className: 'icon-superscript', action: 'superscript', native: true },
    subscript: { className: 'icon-subscript', action: 'subscript', native: true },
    indent: { className: 'icon-indent', action: 'indent', native: true },
    outdent: { className: 'icon-outdent', action: 'outdent', native: true },

    justifyLeft: { className: 'icon-align-left', action: 'justifyLeft', native: true },
    justifyCenter: { className: 'icon-align-center', action: 'justifyCenter', native: true },
    justifyRight: { className: 'icon-align-right', action: 'justifyRight', native: true },
    justifyFull: { className: 'icon-align-justify', action: 'justifyFull', native: true },

    insertOrderedList: { className: 'icon-list-ol', action: 'insertOrderedList', native: true },
    insertUnorderedList: { className: 'icon-list-ul', action: 'insertUnorderedList', native: true },

    foreColor: { className: 'icon-file-text-o' },
    backColor: { className: 'icon-file-text' },
    link: { className: 'icon-link' },
    unLink: { className: 'icon-unlink', action: 'unLink' },
    markdown: { className: 'icon-markdown', action: 'markdown' },
    picture: { className: 'icon-file-image-o' },
    sourceCode: { className: 'icon-code', action: 'sourceCode' },
    table: { className: 'icon-table' },
    undo: { className: 'icon-undo', action: 'undo' },
    redo: { className: 'icon-repeat', action: 'redo' },
    fullscreen: { className: 'icon-fullscreen', action: 'fullscreen' }
  },

  selects: {
    fontName: { className: 'font-select' },
    fontSize: { className: '' },
    element: { className: '' },
    code: { className: 'code-select' }
  }

};

var toolbar = JSON.parse(JSON.stringify(defaultToolbar));

exports.default = {
  resetToolbar: function resetToolbar() {
    toolbar = JSON.parse(JSON.stringify(defaultToolbar));
  },
  modifyToolbar: function modifyToolbar(name, element) {
    if (element.type === 'button') {
      toolbar.btns[name] = {
        className: element.className
      };
      element.action && (toolbar.btns[name].action = element.action);
    } else {
      toolbar.selects[name] = {
        className: element.className
      };
    }
  },
  getToolbar: function getToolbar() {
    return toolbar;
  }
};
module.exports = exports['default'];

/***/ }),
/* 7 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _vue = __webpack_require__(8);

var _vue2 = _interopRequireDefault(_vue);

var _vuex = __webpack_require__(5);

var _vuex2 = _interopRequireDefault(_vuex);

var _lang = __webpack_require__(3);

var _toolbar = __webpack_require__(6);

var _index = __webpack_require__(2);

var _app = __webpack_require__(9);

var _app2 = _interopRequireDefault(_app);

var _states = __webpack_require__(77);

var _states2 = _interopRequireDefault(_states);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function isArray(obj) {
  return Object.prototype.toString.call(obj) === '[object Array]';
}

function isObject(obj) {
  return Object.prototype.toString.call(obj) === '[object Object]';
}

function checkConfig(config) {
  var proto = {
    toolbar: 'array.string',
    fontName: 'array.object',
    fontSize: 'array.string',
    uploadUrl: 'string',
    lang: 'object',
    id: 'string',
    classList: 'array.string',
    plugins: 'array.object'
  };
  var retData = { valid: true, info: '' };
  for (var name in config) {
    var types = '';
    if (isArray(config[name])) {
      types += 'array';
      isObject(config[name][0]) ? types += '.object' : types += '.string';
    } else if (isObject(config[name])) {
      types = 'object';
    } else {
      types = 'string';
    }
    if (proto[name] && proto[name] !== types) {
      retData = {
        valid: false,
        info: 'invalid configuration, the ' + name + ' attribute requires type ' + proto[name] + ' but received ' + types
      };
      break;
    }
  }
  return retData;
}

function mixinConfig(opts) {
  var defaultConf = (0, _index.getDefaultConf)();
  var config = opts ? Object.assign({}, defaultConf, opts) : defaultConf;
  var lang = config.lang || (0, _lang.getDefaultLang)();
  var list = ['fontName', 'fontSize', 'element', 'foreColor', 'backColor', 'undo', 'table', 'link', 'code', 'picture', 'sourceCode', 'markdown', 'fullscreen'];
  // type check for config
  var typeInfo = checkConfig(config);
  if (!typeInfo.valid) {
    throw new Error(typeInfo.info);
  }

  (0, _toolbar.resetToolbar)();

  config.plugins && config.plugins.forEach(function (_ref) {
    var name = _ref.name,
        element = _ref.element,
        component = _ref.component;

    list.push(name);
    _app2.default.components['ve-' + name] = component;
    config.toolbar.indexOf(name) === -1 && config.toolbar.push(name);
    lang[name] = element.lang;
    (0, _toolbar.modifyToolbar)(name, element);
  });

  (0, _index.setConfig)(config);
  (0, _lang.setLang)(lang);

  return Object.assign({}, _app2.default, {
    store: new _vuex2.default.Store((0, _states2.default)()),
    data: function data() {
      return {
        list: list,
        config: config
      };
    }
  });
}

var install = function install(Vue, opts) {
  Vue.component('Vueditor', mixinConfig(opts));
};

var createEditor = function createEditor(el, opts) {
  var Editor = _vue2.default.extend(mixinConfig(opts));
  return new Editor().$mount(el);
};

exports.default = {
  install: install,
  createEditor: createEditor
};
module.exports = exports['default'];

/***/ }),
/* 8 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_8__;

/***/ }),
/* 9 */
/***/ (function(module, exports, __webpack_require__) {

var __vue_exports__, __vue_options__
var __vue_styles__ = {}

/* script */
__vue_exports__ = __webpack_require__(10)

/* template */
var __vue_template__ = __webpack_require__(76)
__vue_options__ = __vue_exports__ = __vue_exports__ || {}
if (
  typeof __vue_exports__.default === "object" ||
  typeof __vue_exports__.default === "function"
) {
__vue_options__ = __vue_exports__ = __vue_exports__.default
}
if (typeof __vue_options__ === "function") {
  __vue_options__ = __vue_options__.options
}

__vue_options__.render = __vue_template__.render
__vue_options__.staticRenderFns = __vue_template__.staticRenderFns

module.exports = __vue_exports__


/***/ }),
/* 10 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _toolbar = __webpack_require__(11);

var _toolbar2 = _interopRequireDefault(_toolbar);

var _design = __webpack_require__(16);

var _design2 = _interopRequireDefault(_design);

var _color = __webpack_require__(19);

var _color2 = _interopRequireDefault(_color);

var _fontname = __webpack_require__(24);

var _fontname2 = _interopRequireDefault(_fontname);

var _fontsize = __webpack_require__(29);

var _fontsize2 = _interopRequireDefault(_fontsize);

var _sourcecode = __webpack_require__(34);

var _sourcecode2 = _interopRequireDefault(_sourcecode);

var _code = __webpack_require__(39);

var _code2 = _interopRequireDefault(_code);

var _element = __webpack_require__(44);

var _element2 = _interopRequireDefault(_element);

var _table = __webpack_require__(49);

var _table2 = _interopRequireDefault(_table);

var _undo = __webpack_require__(54);

var _undo2 = _interopRequireDefault(_undo);

var _link = __webpack_require__(56);

var _link2 = _interopRequireDefault(_link);

var _picture = __webpack_require__(61);

var _picture2 = _interopRequireDefault(_picture);

var _markdown = __webpack_require__(66);

var _markdown2 = _interopRequireDefault(_markdown);

var _fullscreen = __webpack_require__(73);

var _fullscreen2 = _interopRequireDefault(_fullscreen);

__webpack_require__(75);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = {
  components: {
    've-toolbar': _toolbar2.default,
    've-design': _design2.default,
    've-sourcecode': _sourcecode2.default,
    've-code': _code2.default,
    've-forecolor': _color2.default,
    've-backcolor': _color2.default,
    've-fontname': _fontname2.default,
    've-fontsize': _fontsize2.default,
    've-element': _element2.default,
    've-table': _table2.default,
    've-link': _link2.default,
    've-undo': _undo2.default,
    've-picture': _picture2.default,
    've-markdown': _markdown2.default,
    've-fullscreen': _fullscreen2.default
  },
  computed: {
    fullscreen: function fullscreen() {
      return this.$store.state.fullscreen;
    }
  },
  methods: {
    setContent: function setContent(content) {
      this.$store.dispatch('updateContent', content);
    },
    getContent: function getContent() {
      return this.$store.state.content;
    }
  }
}; //
//
//
//
//
//
//
//
//
//
//

module.exports = exports['default'];

/***/ }),
/* 11 */
/***/ (function(module, exports, __webpack_require__) {

var __vue_exports__, __vue_options__
var __vue_styles__ = {}

/* styles */
__webpack_require__(12)

/* script */
__vue_exports__ = __webpack_require__(14)

/* template */
var __vue_template__ = __webpack_require__(15)
__vue_options__ = __vue_exports__ = __vue_exports__ || {}
if (
  typeof __vue_exports__.default === "object" ||
  typeof __vue_exports__.default === "function"
) {
__vue_options__ = __vue_exports__ = __vue_exports__.default
}
if (typeof __vue_options__ === "function") {
  __vue_options__ = __vue_options__.options
}

__vue_options__.render = __vue_template__.render
__vue_options__.staticRenderFns = __vue_template__.staticRenderFns

module.exports = __vue_exports__


/***/ }),
/* 12 */
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(13);
if(typeof content === 'string') content = [[module.i, content, '']];
// add the styles to the DOM
var update = __webpack_require__(1)(content, {});
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(false) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept("!!../../node_modules/css-loader/index.js!../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-72fb2d04!../../node_modules/less-loader/dist/cjs.js!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./toolbar.vue", function() {
			var newContent = require("!!../../node_modules/css-loader/index.js!../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-72fb2d04!../../node_modules/less-loader/dist/cjs.js!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./toolbar.vue");
			if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ }),
/* 13 */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(0)(undefined);
// imports


// module
exports.push([module.i, ".ve-toolbar{display:table;width:100%;font-size:0;letter-spacing:-4px;background:#fff;border-bottom:1px solid #ddd;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ve-toolbar div{cursor:pointer;position:relative;display:inline-block;padding:10px 12px;color:rgba(0,0,0,.6)}.ve-toolbar div.ve-divider{width:0;height:26px;margin:5px;padding:0;border-right:1px solid #ddd;vertical-align:top}.ve-toolbar div.ve-active{background:#eee;color:#000}.ve-toolbar div:hover{background:#eee}.ve-toolbar div.ve-disabled{background:transparent;color:rgba(0,0,0,.6)}.font-select{width:100px}.font-select span{overflow:hidden;white-space:nowrap;-o-text-overflow:ellipsis;text-overflow:ellipsis}.code-select{width:80px}", ""]);

// exports


/***/ }),
/* 14 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _lang = __webpack_require__(3);

var _toolbar = __webpack_require__(6);

var _index = __webpack_require__(2);

exports.default = {
  data: function data() {
    var _getToolbar = (0, _toolbar.getToolbar)(),
        btns = _getToolbar.btns,
        selects = _getToolbar.selects;

    return {
      btns: btns,
      selects: selects,
      lang: (0, _lang.getLang)(),
      config: (0, _index.getConfig)('toolbar')
    };
  },

  computed: {
    states: function states() {
      return this.$store.state.toolbar;
    },
    view: function view() {
      return this.$store.state.view;
    }
  },
  watch: {
    'view': function view(val) {
      var states = {};
      var exArr = ['sourceCode', 'markdown', 'fullscreen', 'divider', '|'];
      this.config.forEach(function (item) {
        if (exArr.indexOf(item) === -1) {
          states[item] = val === 'design' ? 'default' : 'disabled';
        }
      });
      if (val === 'codesnippet') {
        states.code !== undefined && (states.code = 'default');
      }
      this.$store.dispatch('updateButtonStates', states);
    }
  },
  methods: {
    btnHandler: function btnHandler(event, name) {
      if (this.states[name].status === 'disabled') return;
      var btn = this.btns[name];
      if (btn.action) {
        if (btn.native) {
          this.$store.dispatch('execCommand', { name: name, value: null });
        } else {
          this.$store.dispatch('callMethod', { name: name, params: null });
        }
      }
      this.updateStates(name);
      this.showPopup(name, event.currentTarget);
    },
    selectHandler: function selectHandler(event, name) {
      if (this.states[name].status === 'disabled') return;
      this.updateStates(name);
      this.showPopup(name, event.currentTarget);
    },
    showPopup: function showPopup(name, obj) {
      this.$store.dispatch('updatePopupDisplay', this.states[name].showPopup !== undefined ? { name: name, display: !this.states[name].showPopup } : {});
      this.$store.dispatch('updateRect', {
        left: obj.offsetLeft,
        top: obj.offsetTop,
        width: obj.offsetWidth,
        height: obj.offsetHeight + parseInt(window.getComputedStyle(obj).marginBottom)
      });
    },
    updateStates: function updateStates(name) {
      var states = {};
      // update no action btn status, no action means click on it will toggle a popover menu;
      if (this.view === 'design') {
        for (var item in this.btns) {
          if (!this.btns[item].action && this.states[item] && this.states[item].status === 'actived') {
            states[item] = 'default';
          }
        }
      }
      if (['sourceCode', 'markdown'].indexOf(name) !== -1) {
        this.states['sourceCode'] && (states['sourceCode'] = 'default');
        this.states['markdown'] && (states['markdown'] = 'default');
      }
      this.states[name].status === 'actived' ? states[name] = 'default' : states[name] = 'actived';
      this.$store.dispatch('updateButtonStates', states);
    }
  }
}; //
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//

module.exports = exports['default'];

/***/ }),
/* 15 */
/***/ (function(module, exports) {

module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;
  return _h('div', {
    ref: "toolbar",
    staticClass: "ve-toolbar"
  }, [_vm._l((_vm.config), function(item) {
    return [(item in _vm.btns) ? _h('div', {
      class: {
        've-active': _vm.states[item].status == 'actived', 've-disabled': _vm.states[item].status == 'disabled'
      },
      attrs: {
        "title": _vm.lang[item].title,
        "unselectable": "on"
      },
      on: {
        "click": function($event) {
          $event.stopPropagation();
          $event.preventDefault();
          _vm.btnHandler($event, item)
        }
      }
    }, [_h('i', {
      class: [_vm.btns[item].className]
    })]) : _vm._e(), (item in _vm.selects) ? _h('div', {
      class: [{
        've-disabled': _vm.states[item].status == 'disabled'
      }, _vm.selects[item].className, 've-select'],
      attrs: {
        "unselectable": "on"
      },
      on: {
        "click": function($event) {
          $event.stopPropagation();
          $event.preventDefault();
          _vm.selectHandler($event, item)
        }
      }
    }, [_h('span', [_vm._s(_vm.states[item].value)]), _h('i', {
      class: {
        've-triangle-down': !_vm.states[item].display, 've-triangle-up': _vm.states[item].display
      }
    })]) : _vm._e(), (item == 'divider' || item == '|') ? _h('div', {
      staticClass: "ve-divider"
    }) : _vm._e()]
  })])
},staticRenderFns: []}

/***/ }),
/* 16 */
/***/ (function(module, exports, __webpack_require__) {

var __vue_exports__, __vue_options__
var __vue_styles__ = {}

/* script */
__vue_exports__ = __webpack_require__(17)

/* template */
var __vue_template__ = __webpack_require__(18)
__vue_options__ = __vue_exports__ = __vue_exports__ || {}
if (
  typeof __vue_exports__.default === "object" ||
  typeof __vue_exports__.default === "function"
) {
__vue_options__ = __vue_exports__ = __vue_exports__.default
}
if (typeof __vue_options__ === "function") {
  __vue_options__ = __vue_options__.options
}

__vue_options__.render = __vue_template__.render
__vue_options__.staticRenderFns = __vue_template__.staticRenderFns

module.exports = __vue_exports__


/***/ }),
/* 17 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _vuex = __webpack_require__(5);

var _lang = __webpack_require__(3);

var _config = __webpack_require__(2);

exports.default = {
  data: function data() {
    return {
      iframeWin: null,
      iframeDoc: null,
      iframeBody: null,
      timer: null,
      inited: false,
      cache: '',
      lang: (0, _lang.getLang)('design'),
      config: (0, _config.getConfig)()
    };
  },


  computed: (0, _vuex.mapState)({
    view: 'view',
    content: 'content',
    command: 'command',
    states: 'toolbar'
  }),

  watch: {
    'view': function view(val) {
      if (val !== 'design') {
        clearTimeout(this.timer);
        this.updateContent(this.iframeBody.innerHTML);
      }
    },
    'content': function content(val) {
      if (this.inited) {
        this.iframeBody.innerHTML !== val && (this.iframeBody.innerHTML = val);
        this.view === 'design' && this.updateStates();
      } else {
        this.cache = val;
      }
    },
    'command': function command(data) {
      this.exec(data.name, data.value);
    }
  },

  methods: Object.assign({}, (0, _vuex.mapActions)(['updateContent', 'updateButtonStates', 'updatePopupDisplay', 'callMethod', 'switchView']), {
    init: function init(event) {
      this.iframeWin = event.target.contentWindow;
      this.iframeDoc = this.iframeWin.document;
      this.iframeBody = this.iframeWin.document.body;
      this.inited = true;
      if (this.cache) {
        this.iframeBody.innerHTML !== this.cache && (this.iframeBody.innerHTML = this.cache);
        this.cache = '';
      }
      this.iframeDoc.designMode = 'on';
      this.iframeBody.spellcheck = this.config.spellcheck;
      this.iframeBody.style.cssText = 'overflow-x: hidden;';
      this.iframeDoc.head.insertAdjacentHTML('beforeEnd', '<style>pre {margin: 0; padding: 0.5rem; background: #f5f2f0;}</style>');
      this.addEvent();
    },


    // init, selection change
    updateStates: function updateStates() {
      var json = {};
      for (var name in this.states) {
        if (['redo', 'undo', 'fullscreen'].indexOf(name) === -1) {
          if (this.iframeDoc.queryCommandSupported(name)) {
            json[name] = this.iframeDoc.queryCommandState(name) ? 'actived' : 'default';
          }
        }
      }
      this.updateButtonStates(json);
    },
    addEvent: function addEvent() {
      var _this = this;

      var timer = null;
      this.iframeDoc.addEventListener('click', function () {
        // throttle
        clearTimeout(timer);
        timer = setTimeout(function () {
          _this.view === 'design' && _this.updatePopupDisplay();
        }, 200);
        // dispatch selectionchange event for throttling
        _this.iframeDoc.dispatchEvent(new window.Event('selectionchange'));
      }, false);
      this.iframeBody.addEventListener('keydown', this.keydownHandler, false);
      this.iframeBody.addEventListener('keyup', this.keyupHandler, false);
      this.config.noFormatPaste && this.iframeBody.addEventListener('paste', this.pasteHandler, false);
      this.selectionChange();
    },
    keydownHandler: function keydownHandler(event) {
      if (event.ctrlKey && (event.keyCode === 89 || event.keyCode === 90)) {
        event.preventDefault();
        event.keyCode === 89 && this.callMethod({ name: 'redo' });
        event.keyCode === 90 && this.callMethod({ name: 'undo' });
      }
      if (event.keyCode === 13) {
        event.preventDefault();
        var range = this.getRange();
        if (!range) return;
        var container = range.commonAncestorContainer;
        container.nodeType === 3 && (container = container.parentNode);
        var excludeTags = ['code', 'td'];
        var includeTags = ['p', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6'];
        var bool = false;
        var arr = [];
        var child = container;
        var tagName = child.tagName.toLowerCase();
        arr.push(tagName);
        while (tagName !== 'body' && this.iframeBody.contains(container)) {
          container = container.parentNode;
          tagName = container.tagName.toLowerCase();
          arr.push(tagName);
        }
        // 路径中包括excludeTags也不行, 但如果是 td 包括 p 是可以的
        var includeIndex = -1;
        var excludeIndex = -1;
        arr.forEach(function (tag, i) {
          if (includeTags.indexOf(tag) !== -1 && includeIndex === -1) {
            includeIndex = i;
          }
          if (excludeTags.indexOf(tag) !== -1 && excludeIndex === -1) {
            excludeIndex = i;
          }
        });
        if (excludeIndex !== -1) {
          if (includeIndex === -1 || includeIndex !== -1 && includeIndex > excludeIndex) {
            bool = true;
          }
        }
        if (bool) {
          var br = this.iframeDoc.createElement('br');
          range.insertNode(br);
          br.insertAdjacentHTML('afterend', '&#8203;');
          range.setStartAfter(br.nextSibling);
        } else {
          if (range.collapsed) {
            range.setEndAfter(child);
          } else {
            range.setStart(range.startContainer, range.startOffset);
            range.setEndAfter(child);
          }
          // 如果后面没有文本内容了，生成新的p，如果有截断当前的元素
          if (range.toString() !== '') {
            if (child.nextElementSibling !== null) {
              child.parentNode.insertBefore(range.extractContents(), child.nextElementSibling);
            } else {
              child.parentNode.appendChild(range.extractContents());
            }
            child.innerHTML === '' && (child.innerHTML = '<br>');
          } else {
            child.insertAdjacentHTML('afterend', '<p><br></p>');
          }
          range.setStart(child.nextElementSibling, 0);
        }
        range.collapse(true);
      }
    },
    keyupHandler: function keyupHandler(event) {
      var _this2 = this;

      clearTimeout(this.timer);
      this.timer = setTimeout(function () {
        _this2.updateContent(_this2.iframeBody.innerHTML);
      }, 500);
    },


    // 无格式粘贴
    pasteHandler: function pasteHandler(event) {
      var _this3 = this;

      event.preventDefault();
      var range = this.getRange();
      if (!range) return;
      var container = range.commonAncestorContainer;
      container.nodeType === 3 && (container = container.parentNode);

      var clipboardData = event.clipboardData || window.clipboardData;
      var text = clipboardData.getData('text/plain') || clipboardData.getData('Text');
      var arr = text.replace(/(<|>)/igm, function (data) {
        return data.replace('<', '&lt;').replace('>', '&gt;');
      }).split('\n');

      this.insertHTML('', arr.shift());
      arr.forEach(function (item) {
        if (item.match(/\S/mg) !== null) {
          _this3.insertHTML('', '<br>' + item);
        }
      });

      if (this.config.pasteUpload && clipboardData.items) {
        this.pasteUpload(clipboardData.items);
      }
    },
    pasteUpload: function pasteUpload(arr) {
      var self = this;
      Array.prototype.forEach.call(arr, function (item) {
        if (item.getAsFile() && item.kind === 'file' && item.type.match(/^image\//i)) {
          var reader = new window.FileReader();
          reader.readAsDataURL(item.getAsFile());
          reader.onload = function (e) {
            var base64Str = e.target.result.replace('+', '%2B');
            var xhr = new window.XMLHttpRequest();
            xhr.open('POST', self.config.uploadUrl);
            xhr.send({ imageData: base64Str });
            xhr.onload = function () {
              self.insertHTML('', '<img src="' + xhr.responseText + '">');
            };
          };
        }
      });
    },
    selectionChange: function selectionChange() {
      var _this4 = this;

      var timer = null;
      this.iframeDoc.addEventListener('selectionchange', function () {
        // throttle
        clearTimeout(timer);
        timer = setTimeout(function () {
          _this4.checkElement();
          _this4.view === 'design' && _this4.updateStates();
        }, 200);
      }, false);
      if (!('onselectionchange' in document)) {
        var sel = this.getSelection();
        var focusOffset = -1;
        setInterval(function () {
          if (sel && sel.rangeCount) {
            if (focusOffset !== sel.focusOffset) {
              focusOffset = sel.focusOffset;
              _this4.view === 'design' && _this4.updateStates();
              _this4.checkElement();
            }
          } else {
            sel = _this4.getSelection();
          }
        }, 200);
      }
    },
    checkElement: function checkElement() {
      var range = this.getRange();
      if (!range) return;
      var tags = ['p', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6'];
      var container = range.commonAncestorContainer;
      container.nodeType === 3 && (container = container.parentNode);
      var pattern = this.config.code.pattern;

      if (container.tagName.toLowerCase() === 'code') {
        var value = pattern.value.replace(/#type#/, '');
        value = container.getAttribute(pattern.attr).replace(value, '');
        this.$store.dispatch('updateSelectValue', { name: 'code', value: value });
        this.view === 'design' && this.switchView('codesnippet');
      } else {
        // tagname fontsize fontfamily
        var style = window.getComputedStyle(container);
        var unit = this.config.fontSize[0].match(/[a-z]+/ig)[0];
        var fontName = style['fontFamily'].replace(', sans-serif', '').replace(/"/g, '');
        var tagName = container.tagName.toLowerCase();

        while (this.iframeBody.contains(container) && tagName !== 'body' && tags.indexOf(tagName) === -1) {
          container = container.parentNode;
          tagName = container.tagName.toLowerCase();
        }
        // 解决文字直接写到body里
        if (tagName === 'body' && range.startContainer === range.endContainer && range.startContainer.nodeType === 3) {
          var offset = range.startOffset;
          var obj = this.iframeDoc.createElement('p');
          obj.innerHTML = range.startContainer.nodeValue;
          range.startContainer.parentNode.replaceChild(obj, range.startContainer);
          range.setStart(obj.childNodes[0], offset);
          range.collapse(true);
          tagName = 'p';
        }

        if (this.config.toolbar.indexOf('element') !== -1 && tags.indexOf(tagName) !== -1) {
          this.$store.dispatch('updateSelectValue', { name: 'element', value: tagName });
        }
        if (this.config.toolbar.indexOf('fontName') !== -1) {
          this.config.fontName.filter(function (item) {
            return item.val === fontName;
          }).length !== 0 && this.$store.dispatch('updateSelectValue', { name: 'fontName', value: fontName });
        }
        if (this.config.toolbar.indexOf('fontSize') !== -1) {
          if (unit === 'px') {
            this.config.fontSize.indexOf(style['fontSize']) !== -1 && this.$store.dispatch('updateSelectValue', { name: 'fontSize', value: style['fontSize'] });
          }
          if (unit === 'rem') {
            var rootFontSize = parseInt(window.getComputedStyle(document.documentElement)['fontSize']);
            var remFontSize = (parseInt(style['fontSize']) / rootFontSize).toFixed(1) + 'rem';
            this.config.fontSize.indexOf(remFontSize) !== -1 && this.$store.dispatch('updateSelectValue', { name: 'fontSize', value: remFontSize });
          }
        }
        this.view !== 'design' && this.switchView('design');
      }
    },
    exec: function exec(name, value) {
      if (this[name]) {
        this[name](name, value);
      } else {
        var sel = this.getSelection();
        var range = this.getRange();
        if (!sel || !range) return;
        if (document.queryCommandSupported('styleWithCss')) {
          this.iframeDoc.execCommand('styleWithCss', false, true);
        }
        this.iframeDoc.execCommand(name, false, value);
        this.iframeDoc.dispatchEvent(new window.Event('selectionchange'));
      }
      this.iframeBody.focus();
      this.updateContent(this.iframeBody.innerHTML);
    },
    insertHTML: function insertHTML(name, value) {
      var sel = this.getSelection();
      var range = this.getRange();
      if (!sel || !range || !value) return;
      range.deleteContents();
      var node = null;
      var frag = this.iframeDoc.createDocumentFragment();
      var obj = this.iframeDoc.createElement('div');
      obj.innerHTML = value;
      while (obj.firstChild) {
        node = obj.firstChild;
        frag.appendChild(node);
      }
      range.insertNode(frag);
      if (node.hasChildNodes() && node.childNodes[0].nodeType === 1) {
        range.setStart(node.childNodes[0], 0);
      } else {
        range.setStartAfter(node);
      }
      range.collapse(true);
      sel.removeAllRanges();
      sel.addRange(range);
    },
    fontSize: function fontSize(name, value) {
      var _this5 = this;

      var selection = this.getSelection();
      var range = this.getRange();
      if (!selection || !range || range.collapsed) {
        return;
      }
      var childNodes = range.cloneContents().childNodes;
      if (childNodes.length === 1 && childNodes[0].nodeType === 1 && childNodes[0].tagName.toLowerCase() === 'span') {
        var span = range.extractContents().childNodes[0];
        span.style.fontSize = value;
        range.insertNode(span);
        range.selectNode(span);
        selection.removeAllRanges();
        selection.addRange(range);
      } else {
        if (navigator.userAgent.indexOf('Chrome') !== -1 && navigator.userAgent.indexOf('Edge') === -1) {
          if (document.queryCommandSupported('styleWithCss')) {
            this.iframeDoc.execCommand('styleWithCss', false, true);
          }
          this.iframeDoc.execCommand('fontSize', false, 7);
          var container = range.commonAncestorContainer;
          container.nodeType === 3 && (container = container.parentNode);
          container.tagName.toLowerCase() === 'span' && (container = container.parentNode);
          Array.prototype.forEach.call(container.getElementsByTagName('span'), function (span) {
            if (span.style.fontSize.trim() === '-webkit-xxx-large' || span.style.fontSize.trim() === 'xx-large') {
              span.style.fontSize = value;
            }
            span.normalize();
          });
        } else {
          if (document.queryCommandSupported('styleWithCss')) {
            this.iframeDoc.execCommand('styleWithCss', false, false);
          }
          this.iframeDoc.execCommand('fontSize', false, 7);

          var fontList = [];
          var spanList = [];
          var _container = range.commonAncestorContainer;
          _container.nodeType === 3 && (_container = _container.parentNode);
          _container.tagName.toLowerCase() === 'font' && (_container = _container.parentNode);
          fontList = _container.getElementsByTagName('font');

          var _loop = function _loop(_i) {
            var font = fontList[_i];
            var span = document.createElement('span');
            Array.prototype.forEach.call(font.attributes, function (attr) {
              attr.nodeName === 'size' ? span.style.fontSize = value : span.setAttribute(attr.nodeName, attr.nodeValue);
            });
            span.innerHTML = font.innerHTML;
            span.querySelectorAll('span').length !== 0 && _this5.formatContent(span, 'span', 'fontSize');
            span.normalize();
            font.parentNode.replaceChild(span, font);
            spanList.push(span);
            _i--;
            i = _i;
          };

          for (var i = 0; i < fontList.length; i++) {
            _loop(i);
          }
          range.setStartBefore(spanList[0]);
          range.setEndAfter(spanList[spanList.length - 1]);
          selection.removeAllRanges();
          selection.addRange(range);
        }
      }
      this.iframeDoc.dispatchEvent(new window.Event('selectionchange'));
    },
    insertCodeBlock: function insertCodeBlock(name, value) {
      var range = this.getRange();
      if (!range) return;
      var pattern = this.config.code.pattern;

      var tempDiv = document.createElement('div');
      tempDiv.innerHTML = value;
      var attrValue = tempDiv.getElementsByTagName('code')[0].getAttribute(pattern.attr);
      var container = range.commonAncestorContainer;
      container.nodeType === 3 && (container = container.parentNode);
      if (container.tagName.toLowerCase() === 'code') {
        container.setAttribute(pattern.attr, attrValue);
      } else {
        this.insertHTML(name, value);
      }
    },
    formatBlock: function formatBlock(name, value) {
      var ua = navigator.userAgent.toLowerCase();
      if (ua.match(/rv:([\d.]+)\) like gecko/) || ua.match(/msie ([\d.]+)/)) {
        var range = this.getRange();
        if (!range || range.collapsed) {
          window.alert(this.lang.ieMsg);
        } else {
          this.iframeDoc.execCommand('formatblock', false, '<' + value.toUpperCase() + '>');
        }
      } else {
        this.iframeDoc.execCommand('formatblock', false, value);
      }
    },
    formatContent: function formatContent(obj, tagName, cssName) {
      var temp = [];
      var pattern = { fontSize: /font-size:\s?\d+px;/g, verticalAlign: /vertical-align:\s?(sub|super);/g };
      var nodeList = obj.getElementsByTagName(tagName);
      for (var _i2 = 0; _i2 < nodeList.length; _i2++) {
        var node = nodeList[_i2];
        if (node.attributes.length === 1 && node.style.length !== 0 && node.getAttribute('style').match(pattern[cssName]) != null) {
          if (node.children.length === 0) {
            if (node.style.length === 1) {
              var parent = node.parentNode;
              parent.replaceChild(document.createTextNode(node.innerHTML), node);
              parent.normalize();
              _i2--;
            } else {
              node.style[cssName] = '';
            }
          } else {
            temp.push(node);
          }
        }
      }
      if (temp.length !== 0) {
        this.formatContent(obj, tagName, cssName);
      }
    },
    removeFormat: function removeFormat(name, value) {
      this.iframeDoc.execCommand(name, false, value);
      var range = this.getRange();
      if (!range) return;
      var container = range.commonAncestorContainer;
      container.nodeType === 3 && (container = container.parentNode);
      container.tagName.toLowerCase() === 'span' && (container = container.parentNode);
      this.formatContent(container, 'span', 'verticalAlign');
      container.normalize();
    },
    getSelection: function getSelection() {
      if (this.iframeWin.getSelection) {
        return this.iframeWin.getSelection();
      }
    },
    getRange: function getRange() {
      var sel = this.getSelection();
      var range = void 0;
      if (sel && sel.rangeCount !== 0) {
        range = sel.getRangeAt(0);
      }
      return range;
    },
    setRange: function setRange(range) {
      var sel = this.getSelection();
      if (sel) {
        sel.removeAllRanges();
        sel.addRange(range);
      }
    },
    removeRange: function removeRange() {
      var sel = this.getSelection();
      sel && sel.removeAllRanges();
    },
    rangeValid: function rangeValid() {
      var range = this.getRange();
      return range && !range.collapsed;
    },
    unlink: function unlink() {
      var range = this.getRange();
      var container = range.commonAncestorContainer;
      if (container.nodeType === 3) {
        container = container.parentNode;
      }
      if (container.tagName === 'A') {
        var newRange = document.createRange();
        newRange.selectNode(container);
        this.setRange(newRange);
        this.exec('Unlink', null);
        this.removeRange(newRange);
      } else {
        this.exec('Unlink', null);
      }
    }
  })
}; //
//
//
//
//
//
//

module.exports = exports['default'];

/***/ }),
/* 18 */
/***/ (function(module, exports) {

module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;
  return _h('div', {
    directives: [{
      name: "show",
      rawName: "v-show",
      value: (_vm.view === 'design' || _vm.view === 'codesnippet'),
      expression: "view === 'design' || view === 'codesnippet'"
    }],
    staticClass: "ve-design"
  }, [_h('iframe', {
    attrs: {
      "src": "about:blank",
      "frameborder": "0"
    },
    on: {
      "load": _vm.init
    }
  })])
},staticRenderFns: []}

/***/ }),
/* 19 */
/***/ (function(module, exports, __webpack_require__) {

var __vue_exports__, __vue_options__
var __vue_styles__ = {}

/* styles */
__vue_styles__["$style"] = __webpack_require__(20)


/* script */
__vue_exports__ = __webpack_require__(22)

/* template */
var __vue_template__ = __webpack_require__(23)
__vue_options__ = __vue_exports__ = __vue_exports__ || {}
if (
  typeof __vue_exports__.default === "object" ||
  typeof __vue_exports__.default === "function"
) {
__vue_options__ = __vue_exports__ = __vue_exports__.default
}
if (typeof __vue_options__ === "function") {
  __vue_options__ = __vue_options__.options
}

__vue_options__.render = __vue_template__.render
__vue_options__.staticRenderFns = __vue_template__.staticRenderFns
if (!__vue_options__.computed) __vue_options__.computed = {}
Object.keys(__vue_styles__).forEach(function (key) {
var module = __vue_styles__[key]
__vue_options__.computed[key] = function () { return module }
})

module.exports = __vue_exports__


/***/ }),
/* 20 */
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(21);
if(typeof content === 'string') content = [[module.i, content, '']];
// add the styles to the DOM
var update = __webpack_require__(1)(content, {});
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(false) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept("!!../../node_modules/css-loader/index.js?{\"localIdentName\":\"[hash:base64]_0\",\"modules\":true,\"importLoaders\":true}!../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-4b79cfb4!../../node_modules/less-loader/dist/cjs.js!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./color.vue", function() {
			var newContent = require("!!../../node_modules/css-loader/index.js?{\"localIdentName\":\"[hash:base64]_0\",\"modules\":true,\"importLoaders\":true}!../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-4b79cfb4!../../node_modules/less-loader/dist/cjs.js!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./color.vue");
			if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ }),
/* 21 */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(0)(undefined);
// imports


// module
exports.push([module.i, ".BH5VIImEflZEIMp8CUs9a_0{width:176px;padding:10px;position:absolute;z-index:1000;background:#fff;border:1px solid #ccc}.BH5VIImEflZEIMp8CUs9a_0 li{margin:1px;float:left}.BH5VIImEflZEIMp8CUs9a_0 li span{display:block;cursor:pointer;width:20px;height:20px}._2I3u1DXeoSlgjP3cgM98ux_0{max-width:calc(100% - 35px)}.pxqHdCdhgQ9rrysEhrJgk_0{line-height:16px}", ""]);

// exports
exports.locals = {
	"ctn": "BH5VIImEflZEIMp8CUs9a_0",
	"input": "_2I3u1DXeoSlgjP3cgM98ux_0",
	"btn": "pxqHdCdhgQ9rrysEhrJgk_0"
};

/***/ }),
/* 22 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _mixins = __webpack_require__(4);

var _mixins2 = _interopRequireDefault(_mixins);

var _lang = __webpack_require__(3);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//

exports.default = {
  mixins: [_mixins2.default],
  data: function data() {
    return {
      colors: ['#000000', '#424242', '#636363', '#9C9C94', '#CEC6CE', '#EFEFEF', '#F7F7F7', '#FFFFFF', '#FF0000', '#FF9C00', '#FFFF00', '#00FF00', '#00FFFF', '#0000FF', '#9C00FF', '#FF00FF', '#F7C6CE', '#FFE7CE', '#FFEFC6', '#D6EFD6', '#CEDEE7', '#CEE7F7', '#D6D6E7', '#E7D6DE', '#E79C9C', '#FFC69C', '#FFE79C', '#B5D6A5', '#A5C6CE', '#9CC6EF', '#B5A5D6', '#D6A5BD', '#E76363', '#F7AD6B', '#FFD663', '#94BD7B', '#73A5AD', '#6BADDE', '#8C7BC6', '#C67BA5', '#CE0000', '#E79439', '#EFC631', '#6BA54A', '#4A7B8C', '#3984C6', '#634AA5', '#A54A7B', '#9C0000', '#B56308', '#BD9400', '#397B21', '#104A5A', '#085294', '#311873', '#731842', '#630000', '#7B3900', '#846300', '#295218', '#083139', '#003163', '#21104A', '#4A1031'],
      color: '',
      lang: (0, _lang.getLang)(this.tagName)
    };
  },

  computed: {
    showPopup: function showPopup(state) {
      return this.$store.state.toolbar[this.tagName].showPopup;
    }
  },
  methods: {
    updatePopupDisplay: function updatePopupDisplay() {
      this.$store.dispatch('updatePopupDisplay');
    },
    checkValid: function checkValid(color) {
      var sColor = color.replace(/\s+/g, '');
      var hsl3 = /^#[0-9a-f]{3}$/i;
      var hsl6 = /^#[0-9a-f]{6}$/i;
      var rgb = /^rgb\(((\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5]),){2}(\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\)$/;
      if (hsl3.test(sColor) || hsl6.test(sColor) || rgb.test(sColor)) {
        return true;
      }
    },
    setColor: function setColor(type, color) {
      this.$store.dispatch('execCommand', { name: type, value: color });
    },
    clickHandler: function clickHandler(color) {
      this.setColor(this.tagName, color);
      this.updatePopupDisplay();
    },
    inputHandler: function inputHandler() {
      var color = this.color;
      var valid = this.checkValid(color);
      if (!valid) {
        window.alert(this.lang.invalidColorCodeMsg);
      } else {
        this.setColor(this.tagName, color);
        this.updatePopupDisplay();
      }
      this.color = '';
    }
  }
};
module.exports = exports['default'];

/***/ }),
/* 23 */
/***/ (function(module, exports) {

module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;
  return _h('div', {
    directives: [{
      name: "show",
      rawName: "v-show",
      value: (_vm.showPopup),
      expression: "showPopup"
    }],
    staticClass: "ve-color-picker",
    class: _vm.$style.ctn,
    style: (_vm.style)
  }, [_h('div', {
    staticClass: "ve-input-box"
  }, [_h('input', {
    directives: [{
      name: "model",
      rawName: "v-model",
      value: (_vm.color),
      expression: "color"
    }],
    staticClass: "ve-input",
    class: _vm.$style.input,
    attrs: {
      "type": "text",
      "placeholder": _vm.lang.colorCode
    },
    domProps: {
      "value": _vm._s(_vm.color)
    },
    on: {
      "input": function($event) {
        if ($event.target.composing) { return; }
        _vm.color = $event.target.value
      }
    }
  }), _h('button', {
    staticClass: "ve-btn",
    class: _vm.$style.input,
    attrs: {
      "type": "button"
    },
    on: {
      "click": _vm.inputHandler
    }
  }, [_vm._s(_vm.lang.ok)])]), _h('ul', [_vm._l((_vm.colors), function(color, index) {
    return _h('li', {
      key: index,
      on: {
        "click": function($event) {
          _vm.clickHandler(color)
        }
      }
    }, [_h('span', {
      style: ({
        background: color
      }),
      attrs: {
        "title": color
      }
    })])
  })])])
},staticRenderFns: []}

/***/ }),
/* 24 */
/***/ (function(module, exports, __webpack_require__) {

var __vue_exports__, __vue_options__
var __vue_styles__ = {}

/* styles */
__vue_styles__["$style"] = __webpack_require__(25)


/* script */
__vue_exports__ = __webpack_require__(27)

/* template */
var __vue_template__ = __webpack_require__(28)
__vue_options__ = __vue_exports__ = __vue_exports__ || {}
if (
  typeof __vue_exports__.default === "object" ||
  typeof __vue_exports__.default === "function"
) {
__vue_options__ = __vue_exports__ = __vue_exports__.default
}
if (typeof __vue_options__ === "function") {
  __vue_options__ = __vue_options__.options
}

__vue_options__.render = __vue_template__.render
__vue_options__.staticRenderFns = __vue_template__.staticRenderFns
if (!__vue_options__.computed) __vue_options__.computed = {}
Object.keys(__vue_styles__).forEach(function (key) {
var module = __vue_styles__[key]
__vue_options__.computed[key] = function () { return module }
})

module.exports = __vue_exports__


/***/ }),
/* 25 */
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(26);
if(typeof content === 'string') content = [[module.i, content, '']];
// add the styles to the DOM
var update = __webpack_require__(1)(content, {});
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(false) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept("!!../../node_modules/css-loader/index.js?{\"localIdentName\":\"[hash:base64]_0\",\"modules\":true,\"importLoaders\":true}!../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-24d9f967!../../node_modules/less-loader/dist/cjs.js!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./fontname.vue", function() {
			var newContent = require("!!../../node_modules/css-loader/index.js?{\"localIdentName\":\"[hash:base64]_0\",\"modules\":true,\"importLoaders\":true}!../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-24d9f967!../../node_modules/less-loader/dist/cjs.js!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./fontname.vue");
			if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ }),
/* 26 */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(0)(undefined);
// imports


// module
exports.push([module.i, "._3K88AeqPM5bvUs73oXJS4i_0 li{cursor:pointer;padding:6px;border-bottom:1px solid #ddd}._3K88AeqPM5bvUs73oXJS4i_0 li:last-child{border-bottom:none}._3K88AeqPM5bvUs73oXJS4i_0 li:hover{background:#d5e1f2;border-color:#a3bde3}", ""]);

// exports
exports.locals = {
	"ctn": "_3K88AeqPM5bvUs73oXJS4i_0"
};

/***/ }),
/* 27 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _mixins = __webpack_require__(4);

var _mixins2 = _interopRequireDefault(_mixins);

var _config = __webpack_require__(2);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//

exports.default = {
  mixins: [_mixins2.default],
  data: function data() {
    var arr = (0, _config.getConfig)('fontName');
    return {
      fonts: arr,
      val: arr[0].abbr || arr[0].val
    };
  },

  computed: {
    showPopup: function showPopup() {
      return this.$store.state.toolbar.fontName.showPopup;
    }
  },
  mounted: function mounted() {
    this.$store.dispatch('updateSelectValue', { name: 'fontName', value: this.val });
  },

  methods: {
    clickHandler: function clickHandler(font) {
      this.val = font.abbr || font.val;
      this.$store.dispatch('execCommand', { name: 'fontName', value: font.val + ', sans-serif' });
      this.$store.dispatch('updateSelectValue', { name: 'fontName', value: this.val });
      this.$store.dispatch('updatePopupDisplay');
    }
  }
};
module.exports = exports['default'];

/***/ }),
/* 28 */
/***/ (function(module, exports) {

module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;
  return _h('div', {
    directives: [{
      name: "show",
      rawName: "v-show",
      value: (_vm.showPopup),
      expression: "showPopup"
    }],
    staticClass: "ve-dropdown",
    class: _vm.$style.ctn,
    style: (_vm.style)
  }, [_h('ul', [_vm._l((_vm.fonts), function(font, index) {
    return _h('li', {
      key: index,
      style: ({
        fontFamily: font.val + ', sans-serif'
      }),
      on: {
        "click": function($event) {
          _vm.clickHandler(font)
        }
      }
    }, [_vm._s(font.abbr || font.val)])
  })])])
},staticRenderFns: []}

/***/ }),
/* 29 */
/***/ (function(module, exports, __webpack_require__) {

var __vue_exports__, __vue_options__
var __vue_styles__ = {}

/* styles */
__vue_styles__["$style"] = __webpack_require__(30)


/* script */
__vue_exports__ = __webpack_require__(32)

/* template */
var __vue_template__ = __webpack_require__(33)
__vue_options__ = __vue_exports__ = __vue_exports__ || {}
if (
  typeof __vue_exports__.default === "object" ||
  typeof __vue_exports__.default === "function"
) {
__vue_options__ = __vue_exports__ = __vue_exports__.default
}
if (typeof __vue_options__ === "function") {
  __vue_options__ = __vue_options__.options
}

__vue_options__.render = __vue_template__.render
__vue_options__.staticRenderFns = __vue_template__.staticRenderFns
if (!__vue_options__.computed) __vue_options__.computed = {}
Object.keys(__vue_styles__).forEach(function (key) {
var module = __vue_styles__[key]
__vue_options__.computed[key] = function () { return module }
})

module.exports = __vue_exports__


/***/ }),
/* 30 */
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(31);
if(typeof content === 'string') content = [[module.i, content, '']];
// add the styles to the DOM
var update = __webpack_require__(1)(content, {});
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(false) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept("!!../../node_modules/css-loader/index.js?{\"localIdentName\":\"[hash:base64]_0\",\"modules\":true,\"importLoaders\":true}!../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-2cbe9846!../../node_modules/less-loader/dist/cjs.js!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./fontsize.vue", function() {
			var newContent = require("!!../../node_modules/css-loader/index.js?{\"localIdentName\":\"[hash:base64]_0\",\"modules\":true,\"importLoaders\":true}!../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-2cbe9846!../../node_modules/less-loader/dist/cjs.js!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./fontsize.vue");
			if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ }),
/* 31 */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(0)(undefined);
// imports


// module
exports.push([module.i, ".LgCpYevw8jVsOH4KQwNEX_0 li{cursor:pointer;padding:6px;border-bottom:1px solid #ddd}.LgCpYevw8jVsOH4KQwNEX_0 li:last-child{border-bottom:none}.LgCpYevw8jVsOH4KQwNEX_0 li:hover{background:#d5e1f2;border-color:#a3bde3}", ""]);

// exports
exports.locals = {
	"ctn": "LgCpYevw8jVsOH4KQwNEX_0"
};

/***/ }),
/* 32 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _mixins = __webpack_require__(4);

var _mixins2 = _interopRequireDefault(_mixins);

var _config = __webpack_require__(2);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//

exports.default = {
  mixins: [_mixins2.default],
  data: function data() {
    var arr = (0, _config.getConfig)('fontSize');
    return {
      fontSize: arr,
      val: arr[0]
    };
  },

  computed: {
    showPopup: function showPopup() {
      return this.$store.state.toolbar.fontSize.showPopup;
    }
  },
  mounted: function mounted() {
    this.$store.dispatch('updateSelectValue', { name: 'fontSize', value: this.val });
  },

  methods: {
    clickHandler: function clickHandler(size) {
      this.val = size;
      this.$store.dispatch('execCommand', { name: 'fontSize', value: size });
      this.$store.dispatch('updateSelectValue', { name: 'fontSize', value: size });
      this.$store.dispatch('updatePopupDisplay');
    }
  }
};
module.exports = exports['default'];

/***/ }),
/* 33 */
/***/ (function(module, exports) {

module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;
  return _h('div', {
    directives: [{
      name: "show",
      rawName: "v-show",
      value: (_vm.showPopup),
      expression: "showPopup"
    }],
    staticClass: "ve-dropdown",
    class: _vm.$style.ctn,
    style: (_vm.style)
  }, [_h('ul', [_vm._l((_vm.fontSize), function(size, index) {
    return _h('li', {
      key: index,
      on: {
        "click": function($event) {
          _vm.clickHandler(size)
        }
      }
    }, [_vm._s(size)])
  })])])
},staticRenderFns: []}

/***/ }),
/* 34 */
/***/ (function(module, exports, __webpack_require__) {

var __vue_exports__, __vue_options__
var __vue_styles__ = {}

/* styles */
__vue_styles__["$style"] = __webpack_require__(35)


/* script */
__vue_exports__ = __webpack_require__(37)

/* template */
var __vue_template__ = __webpack_require__(38)
__vue_options__ = __vue_exports__ = __vue_exports__ || {}
if (
  typeof __vue_exports__.default === "object" ||
  typeof __vue_exports__.default === "function"
) {
__vue_options__ = __vue_exports__ = __vue_exports__.default
}
if (typeof __vue_options__ === "function") {
  __vue_options__ = __vue_options__.options
}

__vue_options__.render = __vue_template__.render
__vue_options__.staticRenderFns = __vue_template__.staticRenderFns
if (!__vue_options__.computed) __vue_options__.computed = {}
Object.keys(__vue_styles__).forEach(function (key) {
var module = __vue_styles__[key]
__vue_options__.computed[key] = function () { return module }
})

module.exports = __vue_exports__


/***/ }),
/* 35 */
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(36);
if(typeof content === 'string') content = [[module.i, content, '']];
// add the styles to the DOM
var update = __webpack_require__(1)(content, {});
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(false) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept("!!../../node_modules/css-loader/index.js?{\"localIdentName\":\"[hash:base64]_0\",\"modules\":true,\"importLoaders\":true}!../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-09c93255!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./sourcecode.vue", function() {
			var newContent = require("!!../../node_modules/css-loader/index.js?{\"localIdentName\":\"[hash:base64]_0\",\"modules\":true,\"importLoaders\":true}!../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-09c93255!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./sourcecode.vue");
			if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ }),
/* 36 */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(0)(undefined);
// imports


// module
exports.push([module.i, ".Az9ECxXf2bg0saab-HJuY_0{position:absolute;-webkit-box-sizing:border-box;box-sizing:border-box;display:block;width:100%;height:100%;padding:8px;outline:none;border:none;resize:none;font-size:14px}", ""]);

// exports
exports.locals = {
	"editor": "Az9ECxXf2bg0saab-HJuY_0"
};

/***/ }),
/* 37 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _vuex = __webpack_require__(5);

exports.default = {
  data: function data() {
    return {
      code: ''
    };
  },

  computed: (0, _vuex.mapState)(['view', 'content', 'callee']),
  watch: {
    'view': function view(val) {
      if (val === 'sourceCode') {
        this.code = this.content;
      }
    },
    'code': function code(val) {
      this.updateContent(val);
    },
    'content': function content(val) {
      this.$store.dispatch('updateContent', val);
    },
    'callee': function callee(val) {
      if (val.name === 'sourceCode') {
        this.switchView(this.view === 'sourceCode' ? 'design' : 'sourceCode');
        this.updatePopupDisplay();
      }
    }
  },
  methods: (0, _vuex.mapActions)(['switchView', 'updateContent', 'updatePopupDisplay'])
}; //
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//

module.exports = exports['default'];

/***/ }),
/* 38 */
/***/ (function(module, exports) {

module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;
  return _h('div', {
    directives: [{
      name: "show",
      rawName: "v-show",
      value: (_vm.view === 'sourceCode'),
      expression: "view === 'sourceCode'"
    }],
    staticClass: "ve-code"
  }, [_h('textarea', {
    directives: [{
      name: "model",
      rawName: "v-model",
      value: (_vm.code),
      expression: "code"
    }],
    class: _vm.$style.editor,
    domProps: {
      "value": _vm._s(_vm.code)
    },
    on: {
      "input": function($event) {
        if ($event.target.composing) { return; }
        _vm.code = $event.target.value
      }
    }
  })])
},staticRenderFns: []}

/***/ }),
/* 39 */
/***/ (function(module, exports, __webpack_require__) {

var __vue_exports__, __vue_options__
var __vue_styles__ = {}

/* styles */
__vue_styles__["$style"] = __webpack_require__(40)


/* script */
__vue_exports__ = __webpack_require__(42)

/* template */
var __vue_template__ = __webpack_require__(43)
__vue_options__ = __vue_exports__ = __vue_exports__ || {}
if (
  typeof __vue_exports__.default === "object" ||
  typeof __vue_exports__.default === "function"
) {
__vue_options__ = __vue_exports__ = __vue_exports__.default
}
if (typeof __vue_options__ === "function") {
  __vue_options__ = __vue_options__.options
}

__vue_options__.render = __vue_template__.render
__vue_options__.staticRenderFns = __vue_template__.staticRenderFns
if (!__vue_options__.computed) __vue_options__.computed = {}
Object.keys(__vue_styles__).forEach(function (key) {
var module = __vue_styles__[key]
__vue_options__.computed[key] = function () { return module }
})

module.exports = __vue_exports__


/***/ }),
/* 40 */
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(41);
if(typeof content === 'string') content = [[module.i, content, '']];
// add the styles to the DOM
var update = __webpack_require__(1)(content, {});
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(false) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept("!!../../node_modules/css-loader/index.js?{\"localIdentName\":\"[hash:base64]_0\",\"modules\":true,\"importLoaders\":true}!../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-0e8e3e0c!../../node_modules/less-loader/dist/cjs.js!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./code.vue", function() {
			var newContent = require("!!../../node_modules/css-loader/index.js?{\"localIdentName\":\"[hash:base64]_0\",\"modules\":true,\"importLoaders\":true}!../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-0e8e3e0c!../../node_modules/less-loader/dist/cjs.js!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./code.vue");
			if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ }),
/* 41 */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(0)(undefined);
// imports


// module
exports.push([module.i, "._11zDJpEjs3eaX8-ywZ83rs_0 li{padding:6px;border-bottom:1px solid #ddd;cursor:pointer}._11zDJpEjs3eaX8-ywZ83rs_0 li:last-child{border-bottom:none}._11zDJpEjs3eaX8-ywZ83rs_0 li:hover{background:#d5e1f2;border-color:#a3bde3}", ""]);

// exports
exports.locals = {
	"ctn": "_11zDJpEjs3eaX8-ywZ83rs_0"
};

/***/ }),
/* 42 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _mixins = __webpack_require__(4);

var _mixins2 = _interopRequireDefault(_mixins);

var _config = __webpack_require__(2);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//

exports.default = {
  mixins: [_mixins2.default],
  data: function data() {
    var _getConfig = (0, _config.getConfig)('code'),
        type = _getConfig.type,
        pattern = _getConfig.pattern;

    return {
      code: type,
      val: type[0],
      tpl: '<pre><code ' + pattern.attr + '="' + pattern.value + '"><br></code></pre>'
    };
  },

  computed: {
    showPopup: function showPopup() {
      return this.$store.state.toolbar.code.showPopup;
    }
  },
  mounted: function mounted() {
    this.$store.dispatch('updateSelectValue', { name: 'code', value: this.val });
  },

  methods: {
    clickHandler: function clickHandler(type) {
      this.val = type;
      this.$store.dispatch('execCommand', { name: 'insertCodeBlock', value: this.tpl.replace(/#type#/igm, type) });
      this.$store.dispatch('updateSelectValue', { name: 'code', value: type });
      this.$store.dispatch('updatePopupDisplay');
    }
  }
};
module.exports = exports['default'];

/***/ }),
/* 43 */
/***/ (function(module, exports) {

module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;
  return _h('div', {
    directives: [{
      name: "show",
      rawName: "v-show",
      value: (_vm.showPopup),
      expression: "showPopup"
    }],
    staticClass: "ve-dropdown",
    class: _vm.$style.ctn,
    style: (_vm.style)
  }, [_h('ul', [_vm._l((_vm.code), function(type, index) {
    return _h('li', {
      key: index,
      on: {
        "click": function($event) {
          _vm.clickHandler(type)
        }
      }
    }, [_vm._s(type)])
  })])])
},staticRenderFns: []}

/***/ }),
/* 44 */
/***/ (function(module, exports, __webpack_require__) {

var __vue_exports__, __vue_options__
var __vue_styles__ = {}

/* styles */
__vue_styles__["$style"] = __webpack_require__(45)


/* script */
__vue_exports__ = __webpack_require__(47)

/* template */
var __vue_template__ = __webpack_require__(48)
__vue_options__ = __vue_exports__ = __vue_exports__ || {}
if (
  typeof __vue_exports__.default === "object" ||
  typeof __vue_exports__.default === "function"
) {
__vue_options__ = __vue_exports__ = __vue_exports__.default
}
if (typeof __vue_options__ === "function") {
  __vue_options__ = __vue_options__.options
}

__vue_options__.render = __vue_template__.render
__vue_options__.staticRenderFns = __vue_template__.staticRenderFns
if (!__vue_options__.computed) __vue_options__.computed = {}
Object.keys(__vue_styles__).forEach(function (key) {
var module = __vue_styles__[key]
__vue_options__.computed[key] = function () { return module }
})

module.exports = __vue_exports__


/***/ }),
/* 45 */
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(46);
if(typeof content === 'string') content = [[module.i, content, '']];
// add the styles to the DOM
var update = __webpack_require__(1)(content, {});
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(false) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept("!!../../node_modules/css-loader/index.js?{\"localIdentName\":\"[hash:base64]_0\",\"modules\":true,\"importLoaders\":true}!../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-fb1b5702!../../node_modules/less-loader/dist/cjs.js!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./element.vue", function() {
			var newContent = require("!!../../node_modules/css-loader/index.js?{\"localIdentName\":\"[hash:base64]_0\",\"modules\":true,\"importLoaders\":true}!../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-fb1b5702!../../node_modules/less-loader/dist/cjs.js!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./element.vue");
			if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ }),
/* 46 */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(0)(undefined);
// imports


// module
exports.push([module.i, "._3vHBjPXBhHQPBNIroIW5cW_0 li{display:block;cursor:pointer;padding:6px;border-bottom:1px solid #ddd}._3vHBjPXBhHQPBNIroIW5cW_0 li:last-child{border-bottom:none}._3vHBjPXBhHQPBNIroIW5cW_0 li:hover{background:#d5e1f2;border-color:#a3bde3}", ""]);

// exports
exports.locals = {
	"ctn": "_3vHBjPXBhHQPBNIroIW5cW_0"
};

/***/ }),
/* 47 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _mixins = __webpack_require__(4);

var _mixins2 = _interopRequireDefault(_mixins);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = {
  mixins: [_mixins2.default],
  data: function data() {
    return {
      arr: ['p', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6'],
      val: 'p'
    };
  },

  computed: {
    showPopup: function showPopup() {
      return this.$store.state.toolbar.element.showPopup;
    }
  },
  mounted: function mounted() {
    this.$store.dispatch('updateSelectValue', { name: 'element', value: this.val });
  },

  methods: {
    selectItem: function selectItem(event) {
      var tagName = event.target.innerHTML.trim();
      this.val = tagName;
      this.$store.dispatch('execCommand', { name: 'formatBlock', value: tagName });
      this.$store.dispatch('updateSelectValue', { name: 'element', value: tagName });
      this.$store.dispatch('updatePopupDisplay');
    }
  }
}; //
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//

module.exports = exports['default'];

/***/ }),
/* 48 */
/***/ (function(module, exports) {

module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;
  return _h('div', {
    directives: [{
      name: "show",
      rawName: "v-show",
      value: (_vm.showPopup),
      expression: "showPopup"
    }],
    staticClass: "ve-dropdown",
    class: _vm.$style.ctn,
    style: (_vm.style),
    on: {
      "click": _vm.selectItem
    }
  }, [_h('ul', [_vm._l((_vm.arr), function(item, index) {
    return _h('li', {
      key: index
    }, [_vm._s(item)])
  })])])
},staticRenderFns: []}

/***/ }),
/* 49 */
/***/ (function(module, exports, __webpack_require__) {

var __vue_exports__, __vue_options__
var __vue_styles__ = {}

/* styles */
__webpack_require__(50)

/* script */
__vue_exports__ = __webpack_require__(52)

/* template */
var __vue_template__ = __webpack_require__(53)
__vue_options__ = __vue_exports__ = __vue_exports__ || {}
if (
  typeof __vue_exports__.default === "object" ||
  typeof __vue_exports__.default === "function"
) {
__vue_options__ = __vue_exports__ = __vue_exports__.default
}
if (typeof __vue_options__ === "function") {
  __vue_options__ = __vue_options__.options
}

__vue_options__.render = __vue_template__.render
__vue_options__.staticRenderFns = __vue_template__.staticRenderFns

module.exports = __vue_exports__


/***/ }),
/* 50 */
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(51);
if(typeof content === 'string') content = [[module.i, content, '']];
// add the styles to the DOM
var update = __webpack_require__(1)(content, {});
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(false) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept("!!../../node_modules/css-loader/index.js!../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-24ac11de!../../node_modules/less-loader/dist/cjs.js!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./table.vue", function() {
			var newContent = require("!!../../node_modules/css-loader/index.js!../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-24ac11de!../../node_modules/less-loader/dist/cjs.js!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./table.vue");
			if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ }),
/* 51 */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(0)(undefined);
// imports


// module
exports.push([module.i, ".ve-table{width:192px;padding:10px;position:absolute;z-index:1000;background:#fff;border:1px solid #ccc}.ve-table li{width:20px;height:20px;margin:1px;float:left;border:1px solid #ddd}.ve-table li.active{background:#f7f7f7}", ""]);

// exports


/***/ }),
/* 52 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _mixins = __webpack_require__(4);

var _mixins2 = _interopRequireDefault(_mixins);

var _lang = __webpack_require__(3);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//

exports.default = {
  mixins: [_mixins2.default],
  data: function data() {
    return {
      num: 64,
      x: -1,
      y: -1,
      lang: (0, _lang.getLang)('table')
    };
  },

  computed: {
    showPopup: function showPopup() {
      return this.$store.state.toolbar.table.showPopup;
    }
  },
  methods: {
    overHandler: function overHandler(index) {
      this.x = index % 8;
      this.y = parseInt(index / 8);
    },
    clickHandler: function clickHandler() {
      var html = this.createTable(this.y + 1, this.x + 1);
      this.$store.dispatch('execCommand', { name: 'insertHTML', value: html });
      this.$store.dispatch('updatePopupDisplay');
    },
    createTable: function createTable(rows, cols) {
      var oTable = document.createElement('table');
      var oTbody = document.createElement('tbody');
      oTable.style.cssText = 'border-collapse: collapse;';
      oTable.appendChild(oTbody);
      for (var i = 0; i < rows; i++) {
        var tr = document.createElement('tr');
        for (var j = 0; j < cols; j++) {
          var td = document.createElement('td');
          td.innerHTML = '<br>';
          td.style.cssText = 'width: 50px; border: 1px #ddd solid;';
          tr.appendChild(td);
        }
        oTbody.appendChild(tr);
      }
      return oTable.outerHTML;
    }
  }
};
module.exports = exports['default'];

/***/ }),
/* 53 */
/***/ (function(module, exports) {

module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;
  return _h('div', {
    directives: [{
      name: "show",
      rawName: "v-show",
      value: (_vm.showPopup),
      expression: "showPopup"
    }],
    staticClass: "ve-table",
    style: (_vm.style)
  }, [_h('ul', [_vm._l((_vm.num), function(i) {
    return _h('li', {
      key: i,
      class: {
        'active': ((i - 1) % 8 <= _vm.x && parseInt((i - 1) / 8) <= _vm.y)
      },
      on: {
        "mouseover": function($event) {
          _vm.overHandler(i - 1)
        },
        "click": _vm.clickHandler
      }
    })
  })])])
},staticRenderFns: []}

/***/ }),
/* 54 */
/***/ (function(module, exports, __webpack_require__) {

var __vue_exports__, __vue_options__
var __vue_styles__ = {}

/* script */
__vue_exports__ = __webpack_require__(55)
__vue_options__ = __vue_exports__ = __vue_exports__ || {}
if (
  typeof __vue_exports__.default === "object" ||
  typeof __vue_exports__.default === "function"
) {
__vue_options__ = __vue_exports__ = __vue_exports__.default
}
if (typeof __vue_options__ === "function") {
  __vue_options__ = __vue_options__.options
}


module.exports = __vue_exports__


/***/ }),
/* 55 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _vuex = __webpack_require__(5);

exports.default = {
  render: function render() {
    return '';
  },
  data: function data() {
    return {
      stack: [],
      index: -1
    };
  },

  computed: {
    view: function view() {
      return this.$store.state.view;
    },
    content: function content() {
      return this.$store.state.content;
    },
    callee: function callee() {
      return this.$store.state.callee;
    },
    canUndo: function canUndo() {
      return this.index > 0;
    },
    canRedo: function canRedo() {
      return this.index < this.stack.length - 1;
    }
  },
  watch: {
    'content': function content(val) {
      if (this.view === 'design') {
        this.push(val);
      }
    },
    'view': function view(val) {
      if (val === 'design') {
        this.stack = [];
        this.index = -1;
        this.push(this.content);
      }
    },
    'callee': function callee(_ref) {
      var name = _ref.name,
          params = _ref.params;

      if (['undo', 'redo'].indexOf(name) !== -1) {
        this[name]();
      }
    }
  },
  methods: Object.assign({}, (0, _vuex.mapActions)(['updateContent', 'updateButtonStates']), {
    undo: function undo() {
      if (!this.canUndo) return;
      this.index--;
      this.updateContent(this.stack[this.index]);
    },
    redo: function redo() {
      if (!this.canRedo) return;
      this.index++;
      this.updateContent(this.stack[this.index]);
    },
    push: function push(content) {
      if (content !== this.stack[this.index]) {
        this.stack = this.stack.slice(0, this.index + 1);
        this.stack.push(content);
        this.index++;
      }
      this.updateButtonStates({
        undo: this.canUndo ? 'default' : 'disabled',
        redo: this.canRedo ? 'default' : 'disabled'
      });
    }
  })
}; //

module.exports = exports['default'];

/***/ }),
/* 56 */
/***/ (function(module, exports, __webpack_require__) {

var __vue_exports__, __vue_options__
var __vue_styles__ = {}

/* styles */
__vue_styles__["$style"] = __webpack_require__(57)


/* script */
__vue_exports__ = __webpack_require__(59)

/* template */
var __vue_template__ = __webpack_require__(60)
__vue_options__ = __vue_exports__ = __vue_exports__ || {}
if (
  typeof __vue_exports__.default === "object" ||
  typeof __vue_exports__.default === "function"
) {
__vue_options__ = __vue_exports__ = __vue_exports__.default
}
if (typeof __vue_options__ === "function") {
  __vue_options__ = __vue_options__.options
}

__vue_options__.render = __vue_template__.render
__vue_options__.staticRenderFns = __vue_template__.staticRenderFns
if (!__vue_options__.computed) __vue_options__.computed = {}
Object.keys(__vue_styles__).forEach(function (key) {
var module = __vue_styles__[key]
__vue_options__.computed[key] = function () { return module }
})

module.exports = __vue_exports__


/***/ }),
/* 57 */
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(58);
if(typeof content === 'string') content = [[module.i, content, '']];
// add the styles to the DOM
var update = __webpack_require__(1)(content, {});
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(false) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept("!!../../node_modules/css-loader/index.js?{\"localIdentName\":\"[hash:base64]_0\",\"modules\":true,\"importLoaders\":true}!../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-73a31487!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./link.vue", function() {
			var newContent = require("!!../../node_modules/css-loader/index.js?{\"localIdentName\":\"[hash:base64]_0\",\"modules\":true,\"importLoaders\":true}!../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-73a31487!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./link.vue");
			if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ }),
/* 58 */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(0)(undefined);
// imports


// module
exports.push([module.i, "._2qQIGssouc5rC2EqnMDVyK_0{width:240px;height:90px;margin-left:-102px}", ""]);

// exports
exports.locals = {
	"ctn": "_2qQIGssouc5rC2EqnMDVyK_0"
};

/***/ }),
/* 59 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _lang = __webpack_require__(3);

exports.default = {
  data: function data() {
    return {
      val: '',
      lang: (0, _lang.getLang)('link')
    };
  },

  computed: {
    rect: function rect() {
      return this.$store.state.rect;
    },
    showPopup: function showPopup() {
      return this.$store.state.toolbar.link.showPopup;
    },
    callee: function callee() {
      return this.$store.state.callee;
    }
  },
  watch: {
    'callee': function callee(val) {
      val.name === 'unLink' && this.unLinkHandler();
    }
  },
  methods: {
    checkValid: function checkValid() {
      var href = this.val;
      href.match(/^https?:\/\//igm) === null && (href = 'http://' + href);
      return href;
    },
    linkHandler: function linkHandler() {
      var href = this.checkValid();
      this.$store.dispatch('execCommand', { name: 'createlink', value: href });
      this.$store.dispatch('updatePopupDisplay');
    },
    unLinkHandler: function unLinkHandler() {
      this.$store.dispatch('execCommand', { name: 'unlink', value: null });
    }
  }
}; //
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//

module.exports = exports['default'];

/***/ }),
/* 60 */
/***/ (function(module, exports) {

module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;
  return _h('div', {
    directives: [{
      name: "show",
      rawName: "v-show",
      value: (_vm.showPopup),
      expression: "showPopup"
    }],
    staticClass: "ve-popover",
    class: _vm.$style.ctn,
    style: ({
      left: _vm.rect.left + 'px',
      top: (_vm.rect.top + _vm.rect.height) + 'px'
    })
  }, [_vm._m(0), _h('div', {
    staticClass: "ve-pop-header"
  }, [_vm._s(_vm.lang.title)]), _h('div', {
    staticClass: "ve-pop-body"
  }, [_h('div', {
    staticClass: "ve-input-box"
  }, [_h('input', {
    directives: [{
      name: "model",
      rawName: "v-model",
      value: (_vm.val),
      expression: "val"
    }],
    staticClass: "ve-input",
    attrs: {
      "type": "text"
    },
    domProps: {
      "value": _vm._s(_vm.val)
    },
    on: {
      "input": function($event) {
        if ($event.target.composing) { return; }
        _vm.val = $event.target.value
      }
    }
  }), _h('button', {
    staticClass: "ve-btn",
    attrs: {
      "type": "button"
    },
    on: {
      "click": _vm.linkHandler
    }
  }, [_vm._s(_vm.lang.ok)])])])])
},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;
  return _h('div', {
    staticClass: "ve-pop-arrow"
  })
}]}

/***/ }),
/* 61 */
/***/ (function(module, exports, __webpack_require__) {

var __vue_exports__, __vue_options__
var __vue_styles__ = {}

/* styles */
__vue_styles__["$style"] = __webpack_require__(62)


/* script */
__vue_exports__ = __webpack_require__(64)

/* template */
var __vue_template__ = __webpack_require__(65)
__vue_options__ = __vue_exports__ = __vue_exports__ || {}
if (
  typeof __vue_exports__.default === "object" ||
  typeof __vue_exports__.default === "function"
) {
__vue_options__ = __vue_exports__ = __vue_exports__.default
}
if (typeof __vue_options__ === "function") {
  __vue_options__ = __vue_options__.options
}

__vue_options__.render = __vue_template__.render
__vue_options__.staticRenderFns = __vue_template__.staticRenderFns
if (!__vue_options__.computed) __vue_options__.computed = {}
Object.keys(__vue_styles__).forEach(function (key) {
var module = __vue_styles__[key]
__vue_options__.computed[key] = function () { return module }
})

module.exports = __vue_exports__


/***/ }),
/* 62 */
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(63);
if(typeof content === 'string') content = [[module.i, content, '']];
// add the styles to the DOM
var update = __webpack_require__(1)(content, {});
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(false) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept("!!../../node_modules/css-loader/index.js?{\"localIdentName\":\"[hash:base64]_0\",\"modules\":true,\"importLoaders\":true}!../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-0e6cc181!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./picture.vue", function() {
			var newContent = require("!!../../node_modules/css-loader/index.js?{\"localIdentName\":\"[hash:base64]_0\",\"modules\":true,\"importLoaders\":true}!../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-0e6cc181!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./picture.vue");
			if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ }),
/* 63 */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(0)(undefined);
// imports


// module
exports.push([module.i, "._2T9WD2D47RUUwZfCP40fYJ_0{width:500px;position:relative;top:50%;background:#fff;margin:0 auto;-webkit-transform:translateY(-60%);-ms-transform:translateY(-60%);transform:translateY(-60%)}", ""]);

// exports
exports.locals = {
	"wrap": "_2T9WD2D47RUUwZfCP40fYJ_0"
};

/***/ }),
/* 64 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _lang = __webpack_require__(3);

var _config = __webpack_require__(2);

//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//

exports.default = {
  data: function data() {
    return {
      url: '',
      lang: (0, _lang.getLang)('picture'),
      uploadUrl: (0, _config.getConfig)('uploadUrl')
    };
  },

  computed: {
    showPopup: function showPopup() {
      return this.$store.state.toolbar.picture.showPopup;
    }
  },
  watch: {
    'showPopup': function showPopup(val) {
      if (val) {
        document.body.classList.add('ve-fixed');
      } else {
        document.body.classList.remove('ve-fixed');
      }
    }
  },
  methods: {
    hideDialog: function hideDialog() {
      this.$store.dispatch('updatePopupDisplay');
    },
    changeHandler: function changeHandler() {
      var obj = this.$refs.file;
      if (navigator.userAgent.indexOf('MSIE') >= 1) {
        // IE
        this.url = obj.value;
      } else {
        if (obj.files.length !== 0 && obj.files.item(0).type.indexOf('image') !== -1) {
          this.url = window.URL.createObjectURL(obj.files.item(0));
        }
      }
    },
    certainHandler: function certainHandler(event) {
      var obj = this.$refs.file;
      var form = this.$refs.form;
      var uploadUrl = this.uploadUrl;
      if (this.url) {
        if (this.$parent.upload) {
          this.$parent.upload(obj, function (href) {
            this.$store.dispatch('execCommand', { name: 'insertHTML', value: '<img src="' + href + '">' });
            this.hideDialog();
          }.bind(this));
        } else if (uploadUrl) {
          var formData = new window.FormData(form);
          var xhr = new window.XMLHttpRequest();
          xhr.open('POST', uploadUrl);
          xhr.send(formData);
          xhr.onload = function () {
            this.$store.dispatch('execCommand', { name: 'insertHTML', value: '<img src="' + xhr.responseText + '">' });
            this.hideDialog();
          }.bind(this);
          xhr.onerror = function (err) {
            window.alert(err);
          };
        } else {
          this.$store.dispatch('execCommand', { name: 'insertHTML', value: '<img src="' + this.url + '">' });
          this.hideDialog();
        }
      } else {
        window.alert(this.lang.invalidFile);
      }
    }
  }
};
module.exports = exports['default'];

/***/ }),
/* 65 */
/***/ (function(module, exports) {

module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;
  return _h('div', {
    directives: [{
      name: "show",
      rawName: "v-show",
      value: (_vm.showPopup),
      expression: "showPopup"
    }],
    staticClass: "ve-dialog",
    on: {
      "click": function($event) {
        if ($event.target !== $event.currentTarget) { return; }
        _vm.hideDialog($event)
      }
    }
  }, [_h('div', {
    class: _vm.$style.wrap
  }, [_h('div', {
    staticClass: "ve-dialog-header"
  }, [_vm._s(_vm.lang.title), _h('a', {
    staticClass: "ve-close",
    attrs: {
      "href": "javascript:;"
    },
    on: {
      "click": _vm.hideDialog
    }
  }, ["×"])]), _h('div', {
    staticClass: "ve-dialog-body"
  }, [_h('form', {
    ref: "form"
  }, [_h('input', {
    ref: "file",
    attrs: {
      "type": "file",
      "name": "image"
    },
    on: {
      "change": _vm.changeHandler
    }
  })]), (_vm.url) ? _h('div', {
    staticClass: "ve-preview"
  }, [_h('img', {
    attrs: {
      "src": _vm.url
    }
  })]) : _vm._e()]), _h('div', {
    staticClass: "ve-dialog-footer"
  }, [_h('div', {
    staticClass: "ve-btn-box"
  }, [_h('button', {
    staticClass: "ve-btn",
    on: {
      "click": _vm.hideDialog
    }
  }, [_vm._s(_vm.lang.cancel)]), _h('button', {
    staticClass: "ve-btn",
    on: {
      "click": _vm.certainHandler
    }
  }, [_vm._s(_vm.lang.ok)])])])])])
},staticRenderFns: []}

/***/ }),
/* 66 */
/***/ (function(module, exports, __webpack_require__) {

var __vue_exports__, __vue_options__
var __vue_styles__ = {}

/* styles */
__vue_styles__["$style"] = __webpack_require__(67)


/* script */
__vue_exports__ = __webpack_require__(69)

/* template */
var __vue_template__ = __webpack_require__(72)
__vue_options__ = __vue_exports__ = __vue_exports__ || {}
if (
  typeof __vue_exports__.default === "object" ||
  typeof __vue_exports__.default === "function"
) {
__vue_options__ = __vue_exports__ = __vue_exports__.default
}
if (typeof __vue_options__ === "function") {
  __vue_options__ = __vue_options__.options
}

__vue_options__.render = __vue_template__.render
__vue_options__.staticRenderFns = __vue_template__.staticRenderFns
if (!__vue_options__.computed) __vue_options__.computed = {}
Object.keys(__vue_styles__).forEach(function (key) {
var module = __vue_styles__[key]
__vue_options__.computed[key] = function () { return module }
})

module.exports = __vue_exports__


/***/ }),
/* 67 */
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(68);
if(typeof content === 'string') content = [[module.i, content, '']];
// add the styles to the DOM
var update = __webpack_require__(1)(content, {});
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(false) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept("!!../../node_modules/css-loader/index.js?{\"localIdentName\":\"[hash:base64]_0\",\"modules\":true,\"importLoaders\":true}!../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-8f674708!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./markdown.vue", function() {
			var newContent = require("!!../../node_modules/css-loader/index.js?{\"localIdentName\":\"[hash:base64]_0\",\"modules\":true,\"importLoaders\":true}!../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-8f674708!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./markdown.vue");
			if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ }),
/* 68 */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(0)(undefined);
// imports


// module
exports.push([module.i, ".ve-md{position:relative}._31sjThh4deXX0g3ehqSZ2p_0{width:50%;height:100%;padding:8px;position:absolute;outline:none;resize:none;border:none;-webkit-box-sizing:border-box;box-sizing:border-box;overflow-y:auto;font-size:14px;border-right:1px solid #ddd}._3ytmOLXduY0FY9-B7Npk6S_0{width:50%;height:100%;position:absolute;right:0}", ""]);

// exports
exports.locals = {
	"editor": "_31sjThh4deXX0g3ehqSZ2p_0",
	"iframe": "_3ytmOLXduY0FY9-B7Npk6S_0"
};

/***/ }),
/* 69 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _marked = __webpack_require__(70);

var _marked2 = _interopRequireDefault(_marked);

var _vuex = __webpack_require__(5);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//

exports.default = {
  data: function data() {
    return {
      md: '',
      el: null,
      doc: null,
      top: 0,
      currentView: 'design'
    };
  },

  computed: {
    view: function view() {
      return this.$store.state.view;
    },
    content: function content() {
      return this.$store.state.content;
    },
    callee: function callee() {
      return this.$store.state.callee;
    }
  },
  watch: {
    'view': function view(val) {
      if (val !== 'markdown' && this.currentView === 'markdown') {
        this.updateContent(this.doc.body.innerHTML);
      } else {
        this.md = this.content;
        this.update();
      }
      this.currentView = val;
    },
    'callee': function callee(val) {
      if (val.name === 'markdown') {
        this.switchView(this.view === 'markdown' ? 'design' : 'markdown');
        this.updatePopupDisplay();
      }
    }
  },
  methods: Object.assign({}, (0, _vuex.mapActions)(['switchView', 'updateContent', 'updatePopupDisplay']), {
    init: function init(event) {
      this.el = event.target;
      this.doc = event.target.contentDocument;
      this.addEvent();
    },
    update: function update() {
      this.doc.body.innerHTML = (0, _marked2.default)(this.md.trim());
    },
    addEvent: function addEvent() {
      this.doc.addEventListener('scroll', this.scrollHandler.bind(this, 'iframe'), false);
      this.$refs.editor.addEventListener('scroll', this.scrollHandler.bind(this, 'editor'), false);
    },
    scrollHandler: function scrollHandler(type, event) {
      var _this = this;

      if (this.isJsAction) {
        this.isJsAction = false;
        return;
      }
      clearTimeout(this.timer);
      this.timer = setTimeout(function () {
        var editor = _this.$refs.editor;
        var body = _this.doc.body;
        var nowLeft = editor.scrollTop;
        var maxLeft = editor.scrollHeight - editor.offsetHeight;
        var maxRight = body.scrollHeight - 1 - _this.el.offsetHeight;
        var nowRight = body.scrollTop;
        if (type === 'editor') {
          body.scrollTop = nowLeft / maxLeft * maxRight;
        } else {
          editor.scrollTop = nowRight / maxRight * maxLeft;
        }
        // next call of this function is caused by js.
        _this.isJsAction = true;
      }, 100);
    }
  }),
  created: function created() {
    var renderer = new _marked2.default.Renderer();
    renderer.heading = function (text, level) {
      return '<h' + level + '>' + text + '</h' + level + '>';
    };
    renderer.paragraph = function (text) {
      var div = document.createElement('div');
      div.innerHTML = text;
      if (div.children.length === 0) {
        return '<p>' + text + '</p>\n';
      }
      return text + '\n';
    };

    _marked2.default.setOptions({
      renderer: renderer,
      gfm: false
    });
    this.isJsAction = false;
    this.timer = null;
  }
};
module.exports = exports['default'];

/***/ }),
/* 70 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {/**
 * marked - a markdown parser
 * Copyright (c) 2011-2014, Christopher Jeffrey. (MIT Licensed)
 * https://github.com/chjj/marked
 */

;(function() {

/**
 * Block-Level Grammar
 */

var block = {
  newline: /^\n+/,
  code: /^( {4}[^\n]+\n*)+/,
  fences: noop,
  hr: /^( *[-*_]){3,} *(?:\n+|$)/,
  heading: /^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,
  nptable: noop,
  lheading: /^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,
  blockquote: /^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,
  list: /^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,
  html: /^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,
  def: /^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,
  table: noop,
  paragraph: /^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,
  text: /^[^\n]+/
};

block.bullet = /(?:[*+-]|\d+\.)/;
block.item = /^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/;
block.item = replace(block.item, 'gm')
  (/bull/g, block.bullet)
  ();

block.list = replace(block.list)
  (/bull/g, block.bullet)
  ('hr', '\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))')
  ('def', '\\n+(?=' + block.def.source + ')')
  ();

block._tag = '(?!(?:'
  + 'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code'
  + '|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo'
  + '|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b';

block.html = replace(block.html)
  ('comment', /<!--[\s\S]*?-->/)
  ('closed', /<(tag)[\s\S]+?<\/\1>/)
  ('closing', /<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)
  (/tag/g, block._tag)
  ();

block.paragraph = replace(block.paragraph)
  ('hr', block.hr)
  ('heading', block.heading)
  ('lheading', block.lheading)
  ('blockquote', block.blockquote)
  ('tag', '<' + block._tag)
  ('def', block.def)
  ();

/**
 * Normal Block Grammar
 */

block.normal = merge({}, block);

/**
 * GFM Block Grammar
 */

block.gfm = merge({}, block.normal, {
  fences: /^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\s*\1 *(?:\n+|$)/,
  paragraph: /^/,
  heading: /^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/
});

block.gfm.paragraph = replace(block.paragraph)
  ('(?!', '(?!'
    + block.gfm.fences.source.replace('\\1', '\\2') + '|'
    + block.list.source.replace('\\1', '\\3') + '|')
  ();

/**
 * GFM + Tables Block Grammar
 */

block.tables = merge({}, block.gfm, {
  nptable: /^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,
  table: /^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/
});

/**
 * Block Lexer
 */

function Lexer(options) {
  this.tokens = [];
  this.tokens.links = {};
  this.options = options || marked.defaults;
  this.rules = block.normal;

  if (this.options.gfm) {
    if (this.options.tables) {
      this.rules = block.tables;
    } else {
      this.rules = block.gfm;
    }
  }
}

/**
 * Expose Block Rules
 */

Lexer.rules = block;

/**
 * Static Lex Method
 */

Lexer.lex = function(src, options) {
  var lexer = new Lexer(options);
  return lexer.lex(src);
};

/**
 * Preprocessing
 */

Lexer.prototype.lex = function(src) {
  src = src
    .replace(/\r\n|\r/g, '\n')
    .replace(/\t/g, '    ')
    .replace(/\u00a0/g, ' ')
    .replace(/\u2424/g, '\n');

  return this.token(src, true);
};

/**
 * Lexing
 */

Lexer.prototype.token = function(src, top, bq) {
  var src = src.replace(/^ +$/gm, '')
    , next
    , loose
    , cap
    , bull
    , b
    , item
    , space
    , i
    , l;

  while (src) {
    // newline
    if (cap = this.rules.newline.exec(src)) {
      src = src.substring(cap[0].length);
      if (cap[0].length > 1) {
        this.tokens.push({
          type: 'space'
        });
      }
    }

    // code
    if (cap = this.rules.code.exec(src)) {
      src = src.substring(cap[0].length);
      cap = cap[0].replace(/^ {4}/gm, '');
      this.tokens.push({
        type: 'code',
        text: !this.options.pedantic
          ? cap.replace(/\n+$/, '')
          : cap
      });
      continue;
    }

    // fences (gfm)
    if (cap = this.rules.fences.exec(src)) {
      src = src.substring(cap[0].length);
      this.tokens.push({
        type: 'code',
        lang: cap[2],
        text: cap[3] || ''
      });
      continue;
    }

    // heading
    if (cap = this.rules.heading.exec(src)) {
      src = src.substring(cap[0].length);
      this.tokens.push({
        type: 'heading',
        depth: cap[1].length,
        text: cap[2]
      });
      continue;
    }

    // table no leading pipe (gfm)
    if (top && (cap = this.rules.nptable.exec(src))) {
      src = src.substring(cap[0].length);

      item = {
        type: 'table',
        header: cap[1].replace(/^ *| *\| *$/g, '').split(/ *\| */),
        align: cap[2].replace(/^ *|\| *$/g, '').split(/ *\| */),
        cells: cap[3].replace(/\n$/, '').split('\n')
      };

      for (i = 0; i < item.align.length; i++) {
        if (/^ *-+: *$/.test(item.align[i])) {
          item.align[i] = 'right';
        } else if (/^ *:-+: *$/.test(item.align[i])) {
          item.align[i] = 'center';
        } else if (/^ *:-+ *$/.test(item.align[i])) {
          item.align[i] = 'left';
        } else {
          item.align[i] = null;
        }
      }

      for (i = 0; i < item.cells.length; i++) {
        item.cells[i] = item.cells[i].split(/ *\| */);
      }

      this.tokens.push(item);

      continue;
    }

    // lheading
    if (cap = this.rules.lheading.exec(src)) {
      src = src.substring(cap[0].length);
      this.tokens.push({
        type: 'heading',
        depth: cap[2] === '=' ? 1 : 2,
        text: cap[1]
      });
      continue;
    }

    // hr
    if (cap = this.rules.hr.exec(src)) {
      src = src.substring(cap[0].length);
      this.tokens.push({
        type: 'hr'
      });
      continue;
    }

    // blockquote
    if (cap = this.rules.blockquote.exec(src)) {
      src = src.substring(cap[0].length);

      this.tokens.push({
        type: 'blockquote_start'
      });

      cap = cap[0].replace(/^ *> ?/gm, '');

      // Pass `top` to keep the current
      // "toplevel" state. This is exactly
      // how markdown.pl works.
      this.token(cap, top, true);

      this.tokens.push({
        type: 'blockquote_end'
      });

      continue;
    }

    // list
    if (cap = this.rules.list.exec(src)) {
      src = src.substring(cap[0].length);
      bull = cap[2];

      this.tokens.push({
        type: 'list_start',
        ordered: bull.length > 1
      });

      // Get each top-level item.
      cap = cap[0].match(this.rules.item);

      next = false;
      l = cap.length;
      i = 0;

      for (; i < l; i++) {
        item = cap[i];

        // Remove the list item's bullet
        // so it is seen as the next token.
        space = item.length;
        item = item.replace(/^ *([*+-]|\d+\.) +/, '');

        // Outdent whatever the
        // list item contains. Hacky.
        if (~item.indexOf('\n ')) {
          space -= item.length;
          item = !this.options.pedantic
            ? item.replace(new RegExp('^ {1,' + space + '}', 'gm'), '')
            : item.replace(/^ {1,4}/gm, '');
        }

        // Determine whether the next list item belongs here.
        // Backpedal if it does not belong in this list.
        if (this.options.smartLists && i !== l - 1) {
          b = block.bullet.exec(cap[i + 1])[0];
          if (bull !== b && !(bull.length > 1 && b.length > 1)) {
            src = cap.slice(i + 1).join('\n') + src;
            i = l - 1;
          }
        }

        // Determine whether item is loose or not.
        // Use: /(^|\n)(?! )[^\n]+\n\n(?!\s*$)/
        // for discount behavior.
        loose = next || /\n\n(?!\s*$)/.test(item);
        if (i !== l - 1) {
          next = item.charAt(item.length - 1) === '\n';
          if (!loose) loose = next;
        }

        this.tokens.push({
          type: loose
            ? 'loose_item_start'
            : 'list_item_start'
        });

        // Recurse.
        this.token(item, false, bq);

        this.tokens.push({
          type: 'list_item_end'
        });
      }

      this.tokens.push({
        type: 'list_end'
      });

      continue;
    }

    // html
    if (cap = this.rules.html.exec(src)) {
      src = src.substring(cap[0].length);
      this.tokens.push({
        type: this.options.sanitize
          ? 'paragraph'
          : 'html',
        pre: !this.options.sanitizer
          && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),
        text: cap[0]
      });
      continue;
    }

    // def
    if ((!bq && top) && (cap = this.rules.def.exec(src))) {
      src = src.substring(cap[0].length);
      this.tokens.links[cap[1].toLowerCase()] = {
        href: cap[2],
        title: cap[3]
      };
      continue;
    }

    // table (gfm)
    if (top && (cap = this.rules.table.exec(src))) {
      src = src.substring(cap[0].length);

      item = {
        type: 'table',
        header: cap[1].replace(/^ *| *\| *$/g, '').split(/ *\| */),
        align: cap[2].replace(/^ *|\| *$/g, '').split(/ *\| */),
        cells: cap[3].replace(/(?: *\| *)?\n$/, '').split('\n')
      };

      for (i = 0; i < item.align.length; i++) {
        if (/^ *-+: *$/.test(item.align[i])) {
          item.align[i] = 'right';
        } else if (/^ *:-+: *$/.test(item.align[i])) {
          item.align[i] = 'center';
        } else if (/^ *:-+ *$/.test(item.align[i])) {
          item.align[i] = 'left';
        } else {
          item.align[i] = null;
        }
      }

      for (i = 0; i < item.cells.length; i++) {
        item.cells[i] = item.cells[i]
          .replace(/^ *\| *| *\| *$/g, '')
          .split(/ *\| */);
      }

      this.tokens.push(item);

      continue;
    }

    // top-level paragraph
    if (top && (cap = this.rules.paragraph.exec(src))) {
      src = src.substring(cap[0].length);
      this.tokens.push({
        type: 'paragraph',
        text: cap[1].charAt(cap[1].length - 1) === '\n'
          ? cap[1].slice(0, -1)
          : cap[1]
      });
      continue;
    }

    // text
    if (cap = this.rules.text.exec(src)) {
      // Top-level should never reach here.
      src = src.substring(cap[0].length);
      this.tokens.push({
        type: 'text',
        text: cap[0]
      });
      continue;
    }

    if (src) {
      throw new
        Error('Infinite loop on byte: ' + src.charCodeAt(0));
    }
  }

  return this.tokens;
};

/**
 * Inline-Level Grammar
 */

var inline = {
  escape: /^\\([\\`*{}\[\]()#+\-.!_>])/,
  autolink: /^<([^ >]+(@|:\/)[^ >]+)>/,
  url: noop,
  tag: /^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,
  link: /^!?\[(inside)\]\(href\)/,
  reflink: /^!?\[(inside)\]\s*\[([^\]]*)\]/,
  nolink: /^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,
  strong: /^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,
  em: /^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,
  code: /^(`+)([\s\S]*?[^`])\1(?!`)/,
  br: /^ {2,}\n(?!\s*$)/,
  del: noop,
  text: /^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/
};

inline._inside = /(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/;
inline._href = /\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/;

inline.link = replace(inline.link)
  ('inside', inline._inside)
  ('href', inline._href)
  ();

inline.reflink = replace(inline.reflink)
  ('inside', inline._inside)
  ();

/**
 * Normal Inline Grammar
 */

inline.normal = merge({}, inline);

/**
 * Pedantic Inline Grammar
 */

inline.pedantic = merge({}, inline.normal, {
  strong: /^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,
  em: /^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/
});

/**
 * GFM Inline Grammar
 */

inline.gfm = merge({}, inline.normal, {
  escape: replace(inline.escape)('])', '~|])')(),
  url: /^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,
  del: /^~~(?=\S)([\s\S]*?\S)~~/,
  text: replace(inline.text)
    (']|', '~]|')
    ('|', '|https?://|')
    ()
});

/**
 * GFM + Line Breaks Inline Grammar
 */

inline.breaks = merge({}, inline.gfm, {
  br: replace(inline.br)('{2,}', '*')(),
  text: replace(inline.gfm.text)('{2,}', '*')()
});

/**
 * Inline Lexer & Compiler
 */

function InlineLexer(links, options) {
  this.options = options || marked.defaults;
  this.links = links;
  this.rules = inline.normal;
  this.renderer = this.options.renderer || new Renderer;
  this.renderer.options = this.options;

  if (!this.links) {
    throw new
      Error('Tokens array requires a `links` property.');
  }

  if (this.options.gfm) {
    if (this.options.breaks) {
      this.rules = inline.breaks;
    } else {
      this.rules = inline.gfm;
    }
  } else if (this.options.pedantic) {
    this.rules = inline.pedantic;
  }
}

/**
 * Expose Inline Rules
 */

InlineLexer.rules = inline;

/**
 * Static Lexing/Compiling Method
 */

InlineLexer.output = function(src, links, options) {
  var inline = new InlineLexer(links, options);
  return inline.output(src);
};

/**
 * Lexing/Compiling
 */

InlineLexer.prototype.output = function(src) {
  var out = ''
    , link
    , text
    , href
    , cap;

  while (src) {
    // escape
    if (cap = this.rules.escape.exec(src)) {
      src = src.substring(cap[0].length);
      out += cap[1];
      continue;
    }

    // autolink
    if (cap = this.rules.autolink.exec(src)) {
      src = src.substring(cap[0].length);
      if (cap[2] === '@') {
        text = escape(
          cap[1].charAt(6) === ':'
          ? this.mangle(cap[1].substring(7))
          : this.mangle(cap[1])
        );
        href = this.mangle('mailto:') + text;
      } else {
        text = escape(cap[1]);
        href = text;
      }
      out += this.renderer.link(href, null, text);
      continue;
    }

    // url (gfm)
    if (!this.inLink && (cap = this.rules.url.exec(src))) {
      src = src.substring(cap[0].length);
      text = escape(cap[1]);
      href = text;
      out += this.renderer.link(href, null, text);
      continue;
    }

    // tag
    if (cap = this.rules.tag.exec(src)) {
      if (!this.inLink && /^<a /i.test(cap[0])) {
        this.inLink = true;
      } else if (this.inLink && /^<\/a>/i.test(cap[0])) {
        this.inLink = false;
      }
      src = src.substring(cap[0].length);
      out += this.options.sanitize
        ? this.options.sanitizer
          ? this.options.sanitizer(cap[0])
          : escape(cap[0])
        : cap[0]
      continue;
    }

    // link
    if (cap = this.rules.link.exec(src)) {
      src = src.substring(cap[0].length);
      this.inLink = true;
      out += this.outputLink(cap, {
        href: cap[2],
        title: cap[3]
      });
      this.inLink = false;
      continue;
    }

    // reflink, nolink
    if ((cap = this.rules.reflink.exec(src))
        || (cap = this.rules.nolink.exec(src))) {
      src = src.substring(cap[0].length);
      link = (cap[2] || cap[1]).replace(/\s+/g, ' ');
      link = this.links[link.toLowerCase()];
      if (!link || !link.href) {
        out += cap[0].charAt(0);
        src = cap[0].substring(1) + src;
        continue;
      }
      this.inLink = true;
      out += this.outputLink(cap, link);
      this.inLink = false;
      continue;
    }

    // strong
    if (cap = this.rules.strong.exec(src)) {
      src = src.substring(cap[0].length);
      out += this.renderer.strong(this.output(cap[2] || cap[1]));
      continue;
    }

    // em
    if (cap = this.rules.em.exec(src)) {
      src = src.substring(cap[0].length);
      out += this.renderer.em(this.output(cap[2] || cap[1]));
      continue;
    }

    // code
    if (cap = this.rules.code.exec(src)) {
      src = src.substring(cap[0].length);
      out += this.renderer.codespan(escape(cap[2].trim(), true));
      continue;
    }

    // br
    if (cap = this.rules.br.exec(src)) {
      src = src.substring(cap[0].length);
      out += this.renderer.br();
      continue;
    }

    // del (gfm)
    if (cap = this.rules.del.exec(src)) {
      src = src.substring(cap[0].length);
      out += this.renderer.del(this.output(cap[1]));
      continue;
    }

    // text
    if (cap = this.rules.text.exec(src)) {
      src = src.substring(cap[0].length);
      out += this.renderer.text(escape(this.smartypants(cap[0])));
      continue;
    }

    if (src) {
      throw new
        Error('Infinite loop on byte: ' + src.charCodeAt(0));
    }
  }

  return out;
};

/**
 * Compile Link
 */

InlineLexer.prototype.outputLink = function(cap, link) {
  var href = escape(link.href)
    , title = link.title ? escape(link.title) : null;

  return cap[0].charAt(0) !== '!'
    ? this.renderer.link(href, title, this.output(cap[1]))
    : this.renderer.image(href, title, escape(cap[1]));
};

/**
 * Smartypants Transformations
 */

InlineLexer.prototype.smartypants = function(text) {
  if (!this.options.smartypants) return text;
  return text
    // em-dashes
    .replace(/---/g, '\u2014')
    // en-dashes
    .replace(/--/g, '\u2013')
    // opening singles
    .replace(/(^|[-\u2014/(\[{"\s])'/g, '$1\u2018')
    // closing singles & apostrophes
    .replace(/'/g, '\u2019')
    // opening doubles
    .replace(/(^|[-\u2014/(\[{\u2018\s])"/g, '$1\u201c')
    // closing doubles
    .replace(/"/g, '\u201d')
    // ellipses
    .replace(/\.{3}/g, '\u2026');
};

/**
 * Mangle Links
 */

InlineLexer.prototype.mangle = function(text) {
  if (!this.options.mangle) return text;
  var out = ''
    , l = text.length
    , i = 0
    , ch;

  for (; i < l; i++) {
    ch = text.charCodeAt(i);
    if (Math.random() > 0.5) {
      ch = 'x' + ch.toString(16);
    }
    out += '&#' + ch + ';';
  }

  return out;
};

/**
 * Renderer
 */

function Renderer(options) {
  this.options = options || {};
}

Renderer.prototype.code = function(code, lang, escaped) {
  if (this.options.highlight) {
    var out = this.options.highlight(code, lang);
    if (out != null && out !== code) {
      escaped = true;
      code = out;
    }
  }

  if (!lang) {
    return '<pre><code>'
      + (escaped ? code : escape(code, true))
      + '\n</code></pre>';
  }

  return '<pre><code class="'
    + this.options.langPrefix
    + escape(lang, true)
    + '">'
    + (escaped ? code : escape(code, true))
    + '\n</code></pre>\n';
};

Renderer.prototype.blockquote = function(quote) {
  return '<blockquote>\n' + quote + '</blockquote>\n';
};

Renderer.prototype.html = function(html) {
  return html;
};

Renderer.prototype.heading = function(text, level, raw) {
  return '<h'
    + level
    + ' id="'
    + this.options.headerPrefix
    + raw.toLowerCase().replace(/[^\w]+/g, '-')
    + '">'
    + text
    + '</h'
    + level
    + '>\n';
};

Renderer.prototype.hr = function() {
  return this.options.xhtml ? '<hr/>\n' : '<hr>\n';
};

Renderer.prototype.list = function(body, ordered) {
  var type = ordered ? 'ol' : 'ul';
  return '<' + type + '>\n' + body + '</' + type + '>\n';
};

Renderer.prototype.listitem = function(text) {
  return '<li>' + text + '</li>\n';
};

Renderer.prototype.paragraph = function(text) {
  return '<p>' + text + '</p>\n';
};

Renderer.prototype.table = function(header, body) {
  return '<table>\n'
    + '<thead>\n'
    + header
    + '</thead>\n'
    + '<tbody>\n'
    + body
    + '</tbody>\n'
    + '</table>\n';
};

Renderer.prototype.tablerow = function(content) {
  return '<tr>\n' + content + '</tr>\n';
};

Renderer.prototype.tablecell = function(content, flags) {
  var type = flags.header ? 'th' : 'td';
  var tag = flags.align
    ? '<' + type + ' style="text-align:' + flags.align + '">'
    : '<' + type + '>';
  return tag + content + '</' + type + '>\n';
};

// span level renderer
Renderer.prototype.strong = function(text) {
  return '<strong>' + text + '</strong>';
};

Renderer.prototype.em = function(text) {
  return '<em>' + text + '</em>';
};

Renderer.prototype.codespan = function(text) {
  return '<code>' + text + '</code>';
};

Renderer.prototype.br = function() {
  return this.options.xhtml ? '<br/>' : '<br>';
};

Renderer.prototype.del = function(text) {
  return '<del>' + text + '</del>';
};

Renderer.prototype.link = function(href, title, text) {
  if (this.options.sanitize) {
    try {
      var prot = decodeURIComponent(unescape(href))
        .replace(/[^\w:]/g, '')
        .toLowerCase();
    } catch (e) {
      return '';
    }
    if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {
      return '';
    }
  }
  if (this.options.baseUrl && !originIndependentUrl.test(href)) {
    href = resolveUrl(this.options.baseUrl, href);
  }
  var out = '<a href="' + href + '"';
  if (title) {
    out += ' title="' + title + '"';
  }
  out += '>' + text + '</a>';
  return out;
};

Renderer.prototype.image = function(href, title, text) {
  if (this.options.baseUrl && !originIndependentUrl.test(href)) {
    href = resolveUrl(this.options.baseUrl, href);
  }
  var out = '<img src="' + href + '" alt="' + text + '"';
  if (title) {
    out += ' title="' + title + '"';
  }
  out += this.options.xhtml ? '/>' : '>';
  return out;
};

Renderer.prototype.text = function(text) {
  return text;
};

/**
 * Parsing & Compiling
 */

function Parser(options) {
  this.tokens = [];
  this.token = null;
  this.options = options || marked.defaults;
  this.options.renderer = this.options.renderer || new Renderer;
  this.renderer = this.options.renderer;
  this.renderer.options = this.options;
}

/**
 * Static Parse Method
 */

Parser.parse = function(src, options, renderer) {
  var parser = new Parser(options, renderer);
  return parser.parse(src);
};

/**
 * Parse Loop
 */

Parser.prototype.parse = function(src) {
  this.inline = new InlineLexer(src.links, this.options, this.renderer);
  this.tokens = src.reverse();

  var out = '';
  while (this.next()) {
    out += this.tok();
  }

  return out;
};

/**
 * Next Token
 */

Parser.prototype.next = function() {
  return this.token = this.tokens.pop();
};

/**
 * Preview Next Token
 */

Parser.prototype.peek = function() {
  return this.tokens[this.tokens.length - 1] || 0;
};

/**
 * Parse Text Tokens
 */

Parser.prototype.parseText = function() {
  var body = this.token.text;

  while (this.peek().type === 'text') {
    body += '\n' + this.next().text;
  }

  return this.inline.output(body);
};

/**
 * Parse Current Token
 */

Parser.prototype.tok = function() {
  switch (this.token.type) {
    case 'space': {
      return '';
    }
    case 'hr': {
      return this.renderer.hr();
    }
    case 'heading': {
      return this.renderer.heading(
        this.inline.output(this.token.text),
        this.token.depth,
        this.token.text);
    }
    case 'code': {
      return this.renderer.code(this.token.text,
        this.token.lang,
        this.token.escaped);
    }
    case 'table': {
      var header = ''
        , body = ''
        , i
        , row
        , cell
        , flags
        , j;

      // header
      cell = '';
      for (i = 0; i < this.token.header.length; i++) {
        flags = { header: true, align: this.token.align[i] };
        cell += this.renderer.tablecell(
          this.inline.output(this.token.header[i]),
          { header: true, align: this.token.align[i] }
        );
      }
      header += this.renderer.tablerow(cell);

      for (i = 0; i < this.token.cells.length; i++) {
        row = this.token.cells[i];

        cell = '';
        for (j = 0; j < row.length; j++) {
          cell += this.renderer.tablecell(
            this.inline.output(row[j]),
            { header: false, align: this.token.align[j] }
          );
        }

        body += this.renderer.tablerow(cell);
      }
      return this.renderer.table(header, body);
    }
    case 'blockquote_start': {
      var body = '';

      while (this.next().type !== 'blockquote_end') {
        body += this.tok();
      }

      return this.renderer.blockquote(body);
    }
    case 'list_start': {
      var body = ''
        , ordered = this.token.ordered;

      while (this.next().type !== 'list_end') {
        body += this.tok();
      }

      return this.renderer.list(body, ordered);
    }
    case 'list_item_start': {
      var body = '';

      while (this.next().type !== 'list_item_end') {
        body += this.token.type === 'text'
          ? this.parseText()
          : this.tok();
      }

      return this.renderer.listitem(body);
    }
    case 'loose_item_start': {
      var body = '';

      while (this.next().type !== 'list_item_end') {
        body += this.tok();
      }

      return this.renderer.listitem(body);
    }
    case 'html': {
      var html = !this.token.pre && !this.options.pedantic
        ? this.inline.output(this.token.text)
        : this.token.text;
      return this.renderer.html(html);
    }
    case 'paragraph': {
      return this.renderer.paragraph(this.inline.output(this.token.text));
    }
    case 'text': {
      return this.renderer.paragraph(this.parseText());
    }
  }
};

/**
 * Helpers
 */

function escape(html, encode) {
  return html
    .replace(!encode ? /&(?!#?\w+;)/g : /&/g, '&amp;')
    .replace(/</g, '&lt;')
    .replace(/>/g, '&gt;')
    .replace(/"/g, '&quot;')
    .replace(/'/g, '&#39;');
}

function unescape(html) {
	// explicitly match decimal, hex, and named HTML entities
  return html.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig, function(_, n) {
    n = n.toLowerCase();
    if (n === 'colon') return ':';
    if (n.charAt(0) === '#') {
      return n.charAt(1) === 'x'
        ? String.fromCharCode(parseInt(n.substring(2), 16))
        : String.fromCharCode(+n.substring(1));
    }
    return '';
  });
}

function replace(regex, opt) {
  regex = regex.source;
  opt = opt || '';
  return function self(name, val) {
    if (!name) return new RegExp(regex, opt);
    val = val.source || val;
    val = val.replace(/(^|[^\[])\^/g, '$1');
    regex = regex.replace(name, val);
    return self;
  };
}

function resolveUrl(base, href) {
  if (!baseUrls[' ' + base]) {
    // we can ignore everything in base after the last slash of its path component,
    // but we might need to add _that_
    // https://tools.ietf.org/html/rfc3986#section-3
    if (/^[^:]+:\/*[^/]*$/.test(base)) {
      baseUrls[' ' + base] = base + '/';
    } else {
      baseUrls[' ' + base] = base.replace(/[^/]*$/, '');
    }
  }
  base = baseUrls[' ' + base];

  if (href.slice(0, 2) === '//') {
    return base.replace(/:[^]*/, ':') + href;
  } else if (href.charAt(0) === '/') {
    return base.replace(/(:\/*[^/]*)[^]*/, '$1') + href;
  } else {
    return base + href;
  }
}
baseUrls = {};
originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;

function noop() {}
noop.exec = noop;

function merge(obj) {
  var i = 1
    , target
    , key;

  for (; i < arguments.length; i++) {
    target = arguments[i];
    for (key in target) {
      if (Object.prototype.hasOwnProperty.call(target, key)) {
        obj[key] = target[key];
      }
    }
  }

  return obj;
}


/**
 * Marked
 */

function marked(src, opt, callback) {
  if (callback || typeof opt === 'function') {
    if (!callback) {
      callback = opt;
      opt = null;
    }

    opt = merge({}, marked.defaults, opt || {});

    var highlight = opt.highlight
      , tokens
      , pending
      , i = 0;

    try {
      tokens = Lexer.lex(src, opt)
    } catch (e) {
      return callback(e);
    }

    pending = tokens.length;

    var done = function(err) {
      if (err) {
        opt.highlight = highlight;
        return callback(err);
      }

      var out;

      try {
        out = Parser.parse(tokens, opt);
      } catch (e) {
        err = e;
      }

      opt.highlight = highlight;

      return err
        ? callback(err)
        : callback(null, out);
    };

    if (!highlight || highlight.length < 3) {
      return done();
    }

    delete opt.highlight;

    if (!pending) return done();

    for (; i < tokens.length; i++) {
      (function(token) {
        if (token.type !== 'code') {
          return --pending || done();
        }
        return highlight(token.text, token.lang, function(err, code) {
          if (err) return done(err);
          if (code == null || code === token.text) {
            return --pending || done();
          }
          token.text = code;
          token.escaped = true;
          --pending || done();
        });
      })(tokens[i]);
    }

    return;
  }
  try {
    if (opt) opt = merge({}, marked.defaults, opt);
    return Parser.parse(Lexer.lex(src, opt), opt);
  } catch (e) {
    e.message += '\nPlease report this to https://github.com/chjj/marked.';
    if ((opt || marked.defaults).silent) {
      return '<p>An error occured:</p><pre>'
        + escape(e.message + '', true)
        + '</pre>';
    }
    throw e;
  }
}

/**
 * Options
 */

marked.options =
marked.setOptions = function(opt) {
  merge(marked.defaults, opt);
  return marked;
};

marked.defaults = {
  gfm: true,
  tables: true,
  breaks: false,
  pedantic: false,
  sanitize: false,
  sanitizer: null,
  mangle: true,
  smartLists: false,
  silent: false,
  highlight: null,
  langPrefix: 'lang-',
  smartypants: false,
  headerPrefix: '',
  renderer: new Renderer,
  xhtml: false,
  baseUrl: null
};

/**
 * Expose
 */

marked.Parser = Parser;
marked.parser = Parser.parse;

marked.Renderer = Renderer;

marked.Lexer = Lexer;
marked.lexer = Lexer.lex;

marked.InlineLexer = InlineLexer;
marked.inlineLexer = InlineLexer.output;

marked.parse = marked;

if (true) {
  module.exports = marked;
} else if (typeof define === 'function' && define.amd) {
  define(function() { return marked; });
} else {
  this.marked = marked;
}

}).call(function() {
  return this || (typeof window !== 'undefined' ? window : global);
}());

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(71)))

/***/ }),
/* 71 */
/***/ (function(module, exports) {

var g;

// This works in non-strict mode
g = (function() {
	return this;
})();

try {
	// This works if eval is allowed (see CSP)
	g = g || Function("return this")() || (1,eval)("this");
} catch(e) {
	// This works if the window reference is available
	if(typeof window === "object")
		g = window;
}

// g can still be undefined, but nothing to do about it...
// We return undefined, instead of nothing here, so it's
// easier to handle this case. if(!global) { ...}

module.exports = g;


/***/ }),
/* 72 */
/***/ (function(module, exports) {

module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;
  return _h('div', {
    directives: [{
      name: "show",
      rawName: "v-show",
      value: (_vm.currentView == 'markdown'),
      expression: "currentView == 'markdown'"
    }],
    staticClass: "ve-md"
  }, [_h('textarea', {
    directives: [{
      name: "model",
      rawName: "v-model",
      value: (_vm.md),
      expression: "md"
    }],
    ref: "editor",
    class: _vm.$style.editor,
    domProps: {
      "value": _vm._s(_vm.md)
    },
    on: {
      "input": [function($event) {
        if ($event.target.composing) { return; }
        _vm.md = $event.target.value
      }, _vm.update]
    }
  }), _h('iframe', {
    class: _vm.$style.iframe,
    attrs: {
      "src": "about:blank",
      "frameborder": "0"
    },
    on: {
      "load": _vm.init
    }
  })])
},staticRenderFns: []}

/***/ }),
/* 73 */
/***/ (function(module, exports, __webpack_require__) {

var __vue_exports__, __vue_options__
var __vue_styles__ = {}

/* script */
__vue_exports__ = __webpack_require__(74)
__vue_options__ = __vue_exports__ = __vue_exports__ || {}
if (
  typeof __vue_exports__.default === "object" ||
  typeof __vue_exports__.default === "function"
) {
__vue_options__ = __vue_exports__ = __vue_exports__.default
}
if (typeof __vue_options__ === "function") {
  __vue_options__ = __vue_options__.options
}


module.exports = __vue_exports__


/***/ }),
/* 74 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
//

exports.default = {
  render: function render() {
    return '';
  },
  computed: {
    callee: function callee() {
      return this.$store.state.callee;
    },
    fullscreen: function fullscreen() {
      return this.$store.state.fullscreen;
    }
  },
  watch: {
    'callee': function callee(val) {
      if (val.name === 'fullscreen') {
        this.$store.dispatch('setFullScreen', !this.fullscreen);
      }
    }
  }
};
module.exports = exports['default'];

/***/ }),
/* 75 */
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),
/* 76 */
/***/ (function(module, exports) {

module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;
  return _h('div', {
    staticClass: "vueditor",
    class: [{
      've-fullscreen': _vm.fullscreen
    }].concat(_vm.config.classList),
    attrs: {
      "id": _vm.config.id
    }
  }, [_h('ve-toolbar'), _h('ve-design'), _vm._l((_vm.list), function(item) {
    return [(_vm.config.toolbar.indexOf(item) !== -1) ? _h('ve-' + item.toLowerCase(), {
      tag: "component",
      attrs: {
        "tagName": item
      }
    }) : _vm._e()]
  })])
},staticRenderFns: []}

/***/ }),
/* 77 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

exports.default = function () {
  var toolbar = {};

  var _getToolbar = (0, _toolbar.getToolbar)(),
      btns = _getToolbar.btns,
      selects = _getToolbar.selects;

  var config = (0, _index.getConfig)('toolbar');

  config.forEach(function (name) {
    if (name !== 'divider' && name !== '|') {
      toolbar[name] = {};
      if (name in selects) {
        toolbar[name].value = '';
        toolbar[name].showPopup = false;
      } else {
        if (btns[name] && btns[name].action === undefined) {
          toolbar[name].showPopup = false;
        }
      }
      toolbar[name].status = ''; // default disabled actived
    }
  });

  return {
    state: {
      view: 'design',
      content: '',
      toolbar: toolbar,
      fullscreen: false,
      rect: {
        left: 0,
        top: 0,
        width: 0,
        height: 0
      },
      command: {
        name: '',
        value: ''
      },
      callee: {
        name: '',
        params: ''
      }
    },
    actions: actions,
    mutations: _mutations2.default
  };
};

var _actions = __webpack_require__(78);

var actions = _interopRequireWildcard(_actions);

var _mutations = __webpack_require__(79);

var _mutations2 = _interopRequireDefault(_mutations);

var _toolbar = __webpack_require__(6);

var _index = __webpack_require__(2);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

module.exports = exports['default'];

/***/ }),
/* 78 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
var updateSelectValue = exports.updateSelectValue = function updateSelectValue(_ref, data) {
  var commit = _ref.commit;

  commit('UPDATE_SELECT_VALUE', data);
};

var updateButtonStates = exports.updateButtonStates = function updateButtonStates(_ref2, data) {
  var commit = _ref2.commit;

  commit('UPDATE_BUTTON_STATES', data);
};

var updatePopupDisplay = exports.updatePopupDisplay = function updatePopupDisplay(_ref3, data) {
  var commit = _ref3.commit;

  commit('UPDATE_POPUP_DISPLAY', data);
};

var updateRect = exports.updateRect = function updateRect(_ref4, data) {
  var commit = _ref4.commit;

  commit('UPDATE_RECT', data);
};

var updateContent = exports.updateContent = function updateContent(_ref5, data) {
  var commit = _ref5.commit;

  commit('UPDATE_CONTENT', data);
};

var switchView = exports.switchView = function switchView(_ref6, data) {
  var commit = _ref6.commit;

  commit('SWITCH_VIEW', data);
};

var setFullScreen = exports.setFullScreen = function setFullScreen(_ref7, data) {
  var commit = _ref7.commit;

  commit('SET_FULL_SCREEN', data);
};

var callMethod = exports.callMethod = function callMethod(_ref8, data) {
  var commit = _ref8.commit;

  commit('CALL_METHOD', data);
};

var execCommand = exports.execCommand = function execCommand(_ref9, data) {
  var commit = _ref9.commit;

  commit('EXEC_COMMAND', data);
};

/***/ }),
/* 79 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = {
  UPDATE_SELECT_VALUE: function UPDATE_SELECT_VALUE(_ref, _ref2) {
    var toolbar = _ref.toolbar;
    var name = _ref2.name,
        value = _ref2.value;

    toolbar[name].value = value;
  },
  UPDATE_BUTTON_STATES: function UPDATE_BUTTON_STATES(_ref3, data) {
    var toolbar = _ref3.toolbar;

    for (var name in data) {
      if (toolbar[name]) {
        toolbar[name].status = data[name];
      }
    }
  },
  UPDATE_POPUP_DISPLAY: function UPDATE_POPUP_DISPLAY(_ref4, data) {
    var toolbar = _ref4.toolbar;

    for (var name in toolbar) {
      if (toolbar[name].showPopup === undefined) continue;
      if (data && data.name === name) {
        toolbar[name].showPopup = data.display;
      } else if (toolbar[name].showPopup !== false) {
        toolbar[name].showPopup = false;
      }
    }
  },
  UPDATE_RECT: function UPDATE_RECT(state, data) {
    state.rect = data;
  },
  UPDATE_CONTENT: function UPDATE_CONTENT(state, data) {
    state.content = data;
  },
  SWITCH_VIEW: function SWITCH_VIEW(state, data) {
    state.view = data;
  },
  SET_FULL_SCREEN: function SET_FULL_SCREEN(state, data) {
    state.fullscreen = data;
  },
  CALL_METHOD: function CALL_METHOD(state, data) {
    state.callee = data;
  },
  EXEC_COMMAND: function EXEC_COMMAND(state, data) {
    state.command = data;
  }
};
module.exports = exports["default"];

/***/ })
/******/ ]);
});